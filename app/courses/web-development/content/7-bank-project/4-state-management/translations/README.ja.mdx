---
title: ãƒãƒ³ã‚­ãƒ³ã‚°ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã† ãã® 4: çŠ¶æ…‹ç®¡ç†ã®æ¦‚å¿µ
description: ã“ã“ã§æœ¬å½“ã«è§£æ±ºã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹å•é¡Œã¯ä½•ã‹?
lastUpdated: 2024-12-21T06:11:55.476Z
---

# ãƒãƒ³ã‚­ãƒ³ã‚°ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã† ãã® 4: çŠ¶æ…‹ç®¡ç†ã®æ¦‚å¿µ

## ãƒ¬ãƒƒã‚¹ãƒ³å‰ã®å°ãƒ†ã‚¹ãƒˆ

[ãƒ¬ãƒƒã‚¹ãƒ³å‰ã®å°ãƒ†ã‚¹ãƒˆ](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/47?loc=ja)

### ã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³

Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæˆé•·ã™ã‚‹ã«ã¤ã‚Œã¦ã€ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚’è¿½è·¡ã™ã‚‹ã“ã¨ãŒé›£ã—ããªã‚Šã¾ã™ã€‚ã©ã®ã‚³ãƒ¼ãƒ‰ãŒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ã©ã®ãƒšãƒ¼ã‚¸ãŒãƒ‡ãƒ¼ã‚¿ã‚’æ¶ˆè²»ã—ã€ã©ã“ã§ã„ã¤æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‹...ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒé›£ã—ã„å„ä»‹ãªã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã—ã¾ã„ãŒã¡ã§ã™ã€‚ã“ã‚Œã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãªã©ã€ã‚¢ãƒ—ãƒªã®ç•°ãªã‚‹ãƒšãƒ¼ã‚¸é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã«ç‰¹ã«å½“ã¦ã¯ã¾ã‚Šã¾ã™ã€‚*çŠ¶æ…‹ç®¡ç†*ã®æ¦‚å¿µã¯ã€ã‚ã‚‰ã‚†ã‚‹ç¨®é¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«å¸¸ã«å­˜åœ¨ã—ã¦ã„ã¾ã™ãŒã€Web ã‚¢ãƒ—ãƒªã®è¤‡é›‘ã•ãŒå¢—ã™ã«ã¤ã‚Œã€é–‹ç™ºä¸­ã«è€ƒãˆã‚‹ã¹ãé‡è¦ãªãƒã‚¤ãƒ³ãƒˆã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚

ã“ã®æœ€å¾Œã®ãƒ‘ãƒ¼ãƒˆã§ã¯ã€çŠ¶æ…‹ã®ç®¡ç†æ–¹æ³•ã‚’å†è€ƒã™ã‚‹ãŸã‚ã«æ§‹ç¯‰ã—ãŸã‚¢ãƒ—ãƒªã‚’è¦‹ã¦ã„ãã¾ã™ã€‚ä»»æ„ã®æ™‚ç‚¹ã§ã®ãƒ–ãƒ©ã‚¦ã‚¶ã®æ›´æ–°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³é–“ã§ã®ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

### å‰ææ¡ä»¶

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€Web ã‚¢ãƒ—ãƒªã®[ãƒ‡ãƒ¼ã‚¿å–å¾—](../../3-data/translations/README.ja.md)ã®éƒ¨åˆ†ãŒå®Œäº†ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ã« [Node.js](https://nodejs.org/ja) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€[ã‚µãƒ¼ãƒãƒ¼ API ã‚’å®Ÿè¡Œã™ã‚‹](../../api/translations/README.ja.md)ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ã‚µãƒ¼ãƒãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```sh
curl http://localhost:5000/api
# -> çµæœã¨ã—ã¦ "Bank API v1.0.0" ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
```

---

## çŠ¶æ…‹ç®¡ç†ã‚’å†è€ƒã™ã‚‹

[å‰å›ã®ãƒ¬ãƒƒã‚¹ãƒ³](../../3-data/translations/README.ja.md)ã§ã¯ã€ç¾åœ¨ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®éŠ€è¡Œãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° `account` ã‚’ä½¿ã£ã¦ã€ã‚¢ãƒ—ãƒªã®åŸºæœ¬çš„ãªçŠ¶æ…‹ã®æ¦‚å¿µã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€ç¾åœ¨ã®å®Ÿè£…ã«ã¯ã„ãã¤ã‹ã®æ¬ é™¥ãŒã‚ã‚Šã¾ã™ã€‚ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä¸Šã§ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ä½•ãŒèµ·ã“ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰ã«ã¯3ã¤ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚

- ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹ãŸã‚ã€çŠ¶æ…‹ã¯ä¿æŒã•ã‚Œã¾ã›ã‚“
- çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹é–¢æ•°ãŒè¤‡æ•°ã‚ã‚Šã¾ã™ã€‚ã‚¢ãƒ—ãƒªãŒå¤§ãããªã‚‹ã¨ã€å¤‰æ›´ã‚’è¿½è·¡ã™ã‚‹ã®ãŒé›£ã—ããªã‚Šã€1ã¤ã®æ›´æ–°ã‚’å¿˜ã‚ŒãŒã¡ã«ãªã‚Šã¾ã™
- çŠ¶æ…‹ãŒç‰‡ä»˜ã‹ãšã€*Logout* ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãªã£ã¦ã‚‚ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒæ®‹ã£ã¦ã„ã¾ã™

ã“ã‚Œã‚‰ã®å•é¡Œã«ä¸€ã¤ãšã¤å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ãŒå¤šããªã‚Šã€ã‚¢ãƒ—ãƒªãŒã‚ˆã‚Šè¤‡é›‘ã«ãªã‚Šã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒé›£ã—ããªã‚Šã¾ã™ã€‚ã‚ã‚‹ã„ã¯ã€æ•°åˆ†é–“å°ä¼‘æ­¢ã—ã¦ã€æˆ¦ç•¥ã‚’å†è€ƒã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

> ã“ã“ã§æœ¬å½“ã«è§£æ±ºã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹å•é¡Œã¯ä½•ã‹?

[çŠ¶æ…‹ç®¡ç†](https://en.wikipedia.org/wiki/State_management)ã¯ã€ã“ã®2ã¤ã®ç‰¹å®šã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®è‰¯ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã™ã¹ã¦ã§ã™ã€‚

- ã‚¢ãƒ—ãƒªå†…ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’ã‚ã‹ã‚Šã‚„ã™ãä¿ã¤ã«ã¯?
- ã‚¢ãƒ—ãƒªå†…ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’ç†è§£ã—ã‚„ã™ã„çŠ¶æ…‹ã«ä¿ã¤ã«ã¯?

ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±ºã—ãŸã‚‰ã€ä»–ã®å•é¡Œã¯ã™ã§ã«è§£æ±ºã•ã‚Œã¦ã„ã‚‹ã‹ã€ç°¡å˜ã«è§£æ±ºã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®å¤šãã®å¯èƒ½ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã‚ã‚Šã¾ã™ãŒã€ã“ã“ã§ã¯ã€**ãƒ‡ãƒ¼ã‚¿ã¨ãã‚Œã‚’å¤‰æ›´ã™ã‚‹æ–¹æ³•**ã‚’é›†ä¸­åŒ–ã™ã‚‹ã“ã¨ã§æ§‹æˆã•ã‚Œã‚‹ä¸€èˆ¬çš„ãªè§£æ±ºç­–ã‚’æ¡ç”¨ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

![HTMLã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€çŠ¶æ…‹é–“ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’ç¤ºã™ã‚¹ã‚­ãƒ¼ãƒ](../images/data-flow.png)

> ã“ã“ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«ãƒ“ãƒ¥ãƒ¼ã®æ›´æ–°ã®ãƒˆãƒªã‚¬ãƒ¼ã¨ãªã‚‹éƒ¨åˆ†ã¯ã€[Reactive Programming](https://en.wikipedia.org/wiki/Reactive_programming)ã®ã‚ˆã‚Šé«˜åº¦ãªæ¦‚å¿µã«é–¢é€£ã—ã¦ã„ã‚‹ã®ã§ã€ã“ã“ã§ã¯å–ã‚Šä¸Šã’ã¾ã›ã‚“ã€‚æ·±ãæ˜ã‚Šä¸‹ã’ãŸã„æ–¹ã«ã¯è‰¯ã„ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚

âœ… çŠ¶æ…‹ç®¡ç†ã¸ã®ã•ã¾ã–ã¾ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æŒã¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ãŸãã•ã‚“ã‚ã‚Šã¾ã™ãŒã€[Redux](https://redux.js.org) ã¯äººæ°—ã®ã‚ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚å¤§è¦æ¨¡ãª Web ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ç›´é¢ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹å•é¡Œã‚„ã€ãã‚Œã‚’ã©ã®ã‚ˆã†ã«è§£æ±ºã§ãã‚‹ã‹ã‚’å­¦ã¶ãŸã‚ã®è‰¯ã„æ–¹æ³•ã¨ã—ã¦ã€ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹æ¦‚å¿µã‚„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

### ã‚¿ã‚¹ã‚¯

ã¾ãšã¯å°‘ã—ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚`account` å®£è¨€ã‚’ç½®æ›ã—ã¾ã™ã€‚

```js
let account = null;
```

ã“ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

```js
let state = {
  account: null
};
```

ã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€å˜ä¸€ã®ã‚¹ãƒ†ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã™ã¹ã¦ã®ã‚¢ãƒ—ãƒªãƒ‡ãƒ¼ã‚¿ã‚’*ä¸­å¤®é›†æ¨©åŒ–ã™ã‚‹ã“ã¨ã§ã™ã€‚ä»Šã®ã¨ã“ã‚ã¯ `account` ãŒã‚ã‚‹ã ã‘ãªã®ã§ã€ã‚ã¾ã‚Šå¤‰åŒ–ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€é€²åŒ–ã®ãŸã‚ã®ãƒ‘ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚

ã¾ãŸã€ã“ã‚Œã‚’ä½¿ã£ã¦é–¢æ•°ã‚’æ›´æ–°ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚é–¢æ•° `register()` ã¨ `login()` ã«ãŠã„ã¦ã€`account = ...` ã‚’ `state.account = ...` ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

é–¢æ•° `updateDashboard()` ã®å…ˆé ­ã«ä»¥ä¸‹ã®è¡Œã‚’è¿½åŠ ã—ã¾ã™ã€‚

```js
const account = state.account;
```

ä»Šå›ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã ã‘ã§ã¯ã‚ã¾ã‚Šæ”¹å–„ã¯è¦‹ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸãŒã€æ¬¡ã®å¤‰æ›´ã®ãŸã‚ã®åŸºç¤ã‚’å›ºã‚ã‚ˆã†ã¨è€ƒãˆãŸã®ã§ã™ã€‚

## ãƒ‡ãƒ¼ã‚¿å¤‰æ›´ã®è¿½è·¡

ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã« `state` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’é…ç½®ã—ãŸã®ã§ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯æ›´æ–°ã‚’ä¸€å…ƒåŒ–ã™ã‚‹ã“ã¨ã§ã™ã€‚ç›®çš„ã¯ã€ã„ã¤å¤‰æ›´ãŒã‚ã£ãŸã®ã‹ã€ã„ã¤å¤‰æ›´ãŒç™ºç”Ÿã—ãŸã®ã‹ã‚’ç°¡å˜ã«æŠŠæ¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚

`state` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›´ãŒåŠ ãˆã‚‰ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã¯ã€`state` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ [*immutable*](https://en.wikipedia.org/wiki/Immutable_object) ã¨è€ƒãˆã‚‹ã®ã‚‚è‰¯ã„æ–¹æ³•ã§ã™ã€‚ã“ã‚Œã¯ã¾ãŸã€ä½•ã‹ã‚’å¤‰æ›´ã—ãŸã„å ´åˆã«ã¯æ–°ã—ã„ã‚¹ãƒ†ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ã“ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€æ½œåœ¨çš„ã«æœ›ã¾ã—ããªã„[å‰¯ä½œç”¨](https://ja.wikipedia.org/wiki/%E5%89%AF%E4%BD%9C%E7%94%A8_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0))ã«ã¤ã„ã¦ã®ä¿è­·ã‚’æ§‹ç¯‰ã—ã€ã‚¢ãƒ³ãƒ‰ã‚¥/ãƒªãƒ‰ã‚¥ã®å®Ÿè£…ã®ã‚ˆã†ãªã‚¢ãƒ—ãƒªã®æ–°æ©Ÿèƒ½ã®å¯èƒ½æ€§ã‚’é–‹ãã¨åŒæ™‚ã«ã€ãƒ‡ãƒãƒƒã‚°ã‚’å®¹æ˜“ã«ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚¹ãƒ†ãƒ¼ãƒˆã«åŠ ãˆã‚‰ã‚ŒãŸã™ã¹ã¦ã®å¤‰æ›´ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã—ã€ãƒã‚°ã®åŸå› ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«å¤‰æ›´ã®å±¥æ­´ã‚’ä¿æŒã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

JavaScript ã§ã¯ã€[`Object.freeze()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze) ã‚’ä½¿ã£ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸å¤‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸å¤‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›´ã‚’åŠ ãˆã‚ˆã†ã¨ã™ã‚‹ã¨ä¾‹å¤–ãŒç™ºç”Ÿã—ã¾ã™ã€‚

âœ… *æµ…ã„*ä¸å¤‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨*æ·±ã„*ä¸å¤‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é•ã„ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã‹? ãã‚Œã«ã¤ã„ã¦ã¯ [ã“ã¡ã‚‰](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze#What_is_shallow_freeze) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ã‚¿ã‚¹ã‚¯

æ–°ã—ã„ `updateState()` é–¢æ•°ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```js
function updateState(property, newData) {
  state = Object.freeze({
    ...state,
    [property]: newData
  });
}
```

ã“ã®é–¢æ•°ã§ã¯ã€æ–°ã—ã„ã‚¹ãƒ†ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€[*spread (`...`) operator*](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Spread_syntax#spread_in_object_literals) ã‚’ä½¿ç”¨ã—ã¦å‰ã®ã‚¹ãƒ†ãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã„ã¾ã™ã€‚æ¬¡ã«ã€[ãƒ–ãƒ©ã‚±ãƒƒãƒˆè¡¨è¨˜](https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Working_with_Objects#objects_and_properties) `[property]` ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¹ãƒ†ãƒ¼ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¾ã™ã€‚æœ€å¾Œã«ã€`Object.freeze()`ã‚’ä½¿ã£ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ­ãƒƒã‚¯ã—ã€å¤‰æ›´ã‚’é˜²ãã¾ã™ã€‚ä»Šã®ã¨ã“ã‚ã€`account` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ãŒã‚¹ãƒ†ãƒ¼ãƒˆã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã®æ–¹æ³•ã§ã¯å¿…è¦ãªã ã‘ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚¹ãƒ†ãƒ¼ãƒˆã«è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€`state` ã®åˆæœŸåŒ–ã‚’æ›´æ–°ã—ã¦åˆæœŸçŠ¶æ…‹ã‚‚å‡çµã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```js
let state = Object.freeze({
  account: null
});
```

ãã®å¾Œã€`state.account = result;` ã®ä»£å…¥ã‚’ `state.account = result;` ã«ç½®ãæ›ãˆã¦ `register` é–¢æ•°ã‚’æ›´æ–°ã—ã¾ã™ã€‚

```js
updateState('account', result);
```

åŒã˜ã“ã¨ã‚’ `login` é–¢æ•°ã§è¡Œã„ã€`state.account = data;` ã«ç½®ãæ›ãˆã¾ã™ã€‚

```js
updateState('account', data);
```

ã“ã“ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ *Logout* ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒã‚¯ãƒªã‚¢ã•ã‚Œãªã„å•é¡Œã‚’ä¿®æ­£ã—ã¾ã™ã€‚

æ–°ã—ã„é–¢æ•° `logout()` ã‚’ä½œæˆã—ã¾ã™ã€‚

```js
function logout() {
  updateState('account', null);
  navigate('/login');
}
```

`updateDashboard()` ã§ã€ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ `return navigate('/login');` ã‚’ `return logout()` ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

æ–°ã—ã„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¦ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã¨ãƒ­ã‚°ã‚¤ãƒ³ã‚’ç¹°ã‚Šè¿”ã—ã¦ã¿ã¦ã€ã™ã¹ã¦ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

> ãƒ’ãƒ³ãƒˆ: `updateState()` ã®ä¸‹éƒ¨ã« `console.log(state)` ã‚’è¿½åŠ ã—ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºãƒ„ãƒ¼ãƒ«ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ãã“ã¨ã§ã€ã™ã¹ã¦ã®çŠ¶æ…‹ã®å¤‰åŒ–ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## çŠ¶æ…‹ã‚’ç¶­æŒã™ã‚‹

ã»ã¨ã‚“ã©ã® Web ã‚¢ãƒ—ãƒªã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã—ã¦ãŠã‹ãªã„ã¨æ­£å¸¸ã«å‹•ä½œã—ã¾ã›ã‚“ã€‚ã™ã¹ã¦ã®é‡è¦ãªãƒ‡ãƒ¼ã‚¿ã¯é€šå¸¸ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã€ã‚µãƒ¼ãƒãƒ¼ API ã‚’ä»‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã¾ã™ã€‚ã—ã‹ã—ã€æ™‚ã«ã¯ã€ã‚ˆã‚Šè‰¯ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã‚„èª­ã¿è¾¼ã¿ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ã“ã¨ã‚‚èˆˆå‘³æ·±ã„ã“ã¨ã§ã™ã€‚

ãƒ–ãƒ©ã‚¦ã‚¶ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–ã™ã‚‹å ´åˆã€ã„ãã¤ã‹ã®é‡è¦ãªè³ªå•ãŒã‚ã‚Šã¾ã™ã€‚

- *ãƒ‡ãƒ¼ã‚¿ã¯æ©Ÿå¯†æ€§ã®é«˜ã„ã‚‚ã®ã§ã—ã‚‡ã†ã‹?* ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã©ã®æ©Ÿå¯†æ€§ã®é«˜ã„ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ä¿å­˜ã™ã‚‹ã“ã¨ã¯é¿ã‘ã‚‹ã¹ãã§ã™
- *ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã©ã®ãã‚‰ã„ã®æœŸé–“ä¿å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã‹?* ã“ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã®ã¯ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãŸã‚ã ã‘ã§ã™ã‹ã€ãã‚Œã¨ã‚‚æ°¸é ã«ä¿å­˜ã—ãŸã„ã§ã™ã‹?

Web ã‚¢ãƒ—ãƒªå†…ã®æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹æ–¹æ³•ã¯ã€ç›®çš„ã«å¿œã˜ã¦è¤‡æ•°ã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€URL ã‚’ä½¿ç”¨ã—ã¦æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ä¿å­˜ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§å…±æœ‰ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€[èªè¨¼](https://en.wikipedia.org/wiki/Authentication)æƒ…å ±ã®ã‚ˆã†ã«ã€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼ã¨å…±æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€[HTTP ã‚¯ãƒƒã‚­ãƒ¼](https://developer.mozilla.org/ja/docs/Web/HTTP/Cookies)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã‚‚ã†ä¸€ã¤ã®é¸æŠè‚¢ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®å¤šãã®ãƒ–ãƒ©ã‚¦ã‚¶ API ã®ã†ã¡ã®ä¸€ã¤ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã™ã€‚ãã®ä¸­ã§ã‚‚ç‰¹ã«èˆˆå‘³æ·±ã„ã‚‚ã®ãŒ2ã¤ã‚ã‚Šã¾ã™ã€‚

- [`localStorage`](https://developer.mozilla.org/ja/docs/Web/API/Window/localStorage): [Key/Value ã‚¹ãƒˆã‚¢](https://en.wikipedia.org/wiki/Key%E2%80%93value_database)ã¯ã€ç•°ãªã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ã¾ãŸãŒã£ã¦ç¾åœ¨ã® Web ã‚µã‚¤ãƒˆã«å›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯æœŸé™åˆ‡ã‚Œã«ãªã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“
- [`sessionStorage`](https://developer.mozilla.org/ja/docs/Web/API/Window/sessionStorage): ã“ã‚Œã¯ `localStorage` ã¨åŒã˜ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ãŒã€ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®çµ‚äº†æ™‚(ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‰ã˜ã‚‰ã‚ŒãŸæ™‚)ã«æ¶ˆå»ã•ã‚Œã¾ã™

ã“ã‚Œã‚‰ã® API ã¯ã©ã¡ã‚‰ã‚‚[æ–‡å­—åˆ—](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String)ã—ã‹ä¿å­˜ã§ããªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚è¤‡é›‘ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ ¼ç´ã—ãŸã„å ´åˆã¯ã€[`JSON.stringify()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify) ã‚’ä½¿ã£ã¦ [JSON](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/JSON) å½¢å¼ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

âœ… ã‚µãƒ¼ãƒãƒ¼ã§å‹•ä½œã—ãªã„ Web ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ãŸã„å ´åˆã¯ã€[`IndexedDB` API](https://developer.mozilla.org/ja/docs/Web/API/IndexedDB_API) ã‚’ä½¿ç”¨ã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸Šã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ã“ã‚Œã¯é«˜åº¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚„ã€ã‹ãªã‚Šã®é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã«ã¯ã€ä½¿ç”¨ã™ã‚‹ã®ãŒã‚ˆã‚Šè¤‡é›‘ã«ãªã‚‹ãŸã‚ã€äºˆç´„ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚¿ã‚¹ã‚¯

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã« *Logout* ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¾ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã¾ã¾ã«ã—ãŸã„ã®ã§ã€`localStorage` ã‚’ä½¿ã£ã¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã™ã€‚ã¾ãšã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®ã‚­ãƒ¼ã‚’å®šç¾©ã—ã¾ã—ã‚‡ã†ã€‚

```js
const storageKey = 'savedAccount';
```

ãã—ã¦ã€ã“ã®è¡Œã‚’ `updateState()` é–¢æ•°ã®æœ€å¾Œã«è¿½åŠ ã—ã¾ã™ã€‚

```js
localStorage.setItem(storageKey, JSON.stringify(state.account));
```

ã“ã‚Œã§ã€ä»¥å‰ã¯ã™ã¹ã¦ã®çŠ¶æ…‹ã®æ›´æ–°ã‚’ä¸€å…ƒåŒ–ã—ã¦ã„ãŸã®ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯æ°¸ç¶šåŒ–ã•ã‚Œã€å¸¸ã«æœ€æ–°ã®çŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã‹ã‚‰ãŒã€ä»¥å‰ã®ã™ã¹ã¦ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®æ©æµã‚’å—ã‘å§‹ã‚ã‚‹ã¨ã“ã‚ã§ã™ ğŸ™‚ã€‚

ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚¢ãƒ—ãƒªãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã¨ãã«å¾©å…ƒã™ã‚‹ã“ã¨ã«ã‚‚æ°—ã‚’é…ã‚‰ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰ãŒå¢—ãˆã¦ãã‚‹ã®ã§ã€`app.js` ã®ä¸‹éƒ¨ã«ä»¥å‰ã®ã‚³ãƒ¼ãƒ‰ã‚‚å«ã‚ãŸ `init` é–¢æ•°ã‚’æ–°ãŸã«ä½œæˆã—ã¦ãŠãã¨ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

```js
function init() {
  const savedAccount = localStorage.getItem(storageKey);
  if (savedAccount) {
    updateState('account', JSON.parse(savedAccount));
  }

  // å‰å›ã®åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰
  window.onpopstate = () => updateRoute();
  updateRoute();
}

init();
```

ã“ã“ã§ã¯ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ã‚‚ã—ã‚ã‚Œã°ãã‚Œã«å¿œã˜ã¦çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã™ã€‚ãƒšãƒ¼ã‚¸ã®æ›´æ–°ä¸­ã«çŠ¶æ…‹ã«ä¾å­˜ã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€ãƒ«ãƒ¼ãƒˆã‚’æ›´æ–°ã™ã‚‹å‰ã«ã“ã‚Œã‚’è¡Œã†ã“ã¨ãŒé‡è¦ã§ã™ã€‚

ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã—ã¦ã„ã‚‹ã®ã§ã€*ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰* ãƒšãƒ¼ã‚¸ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒšãƒ¼ã‚¸ã«ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒ *ãƒ­ã‚°ã‚¤ãƒ³* ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã¾ã™ã€‚`updateRoute()` ã§ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã® `return navigate('/login');` ã‚’ `return navigate('dashboard');` ã«ç½®ãæ›ãˆã¾ã™ã€‚

ã‚¢ãƒ—ãƒªã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒšãƒ¼ã‚¸ã‚’æ›´æ–°ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã“ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§åˆæœŸã®å•é¡Œã¯ã™ã¹ã¦è§£æ±ºã—ã¾ã—ãŸã€‚

## ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°

...ã—ã‹ã—ã€æˆ‘ã€…ã¯ã¾ãŸã€æ–°ã—ã„ã‚‚ã®ã‚’ä½œã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãŠã£ã¨!

`test` ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ã£ã¦ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«è¡Œãã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦æ–°ã—ã„ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚

```sh
curl --request POST \
     --header "Content-Type: application/json" \
     --data "{ \"date\": \"2020-07-24\", \"object\": \"Bought book\", \"amount\": -20 }" \
     http://localhost:5000/api/accounts/test/transactions
```

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ãƒšãƒ¼ã‚¸ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§æ›´æ–°ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿæ–°ã—ã„ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã‹?

ã“ã®çŠ¶æ…‹ã¯ `localStorage` ã®ãŠã‹ã’ã§ç„¡æœŸé™ã«ä¿æŒã•ã‚Œã¾ã™ãŒã€ã‚¢ãƒ—ãƒªã‹ã‚‰ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦å†åº¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¾ã§æ›´æ–°ã•ã‚Œã¾ã›ã‚“ã€‚

ã“ã‚Œã‚’ä¿®æ­£ã™ã‚‹ãŸã‚ã«è€ƒãˆã‚‰ã‚Œã‚‹æˆ¦ç•¥ã®1ã¤ã¯ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãŸã³ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å›é¿ã™ã‚‹ã“ã¨ã§ã™ã€‚

### ã‚¿ã‚¹ã‚¯

æ–°ã—ã„é–¢æ•° `updateAccountData` ã‚’ä½œæˆã—ã¾ã™ã€‚

```js
async function updateAccountData() {
  const account = state.account;
  if (!account) {
    return logout();
  }

  const data = await getAccount(account.user);
  if (data.error) {
    return logout();
  }

  updateState('account', data);
}
```

ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ç¾åœ¨ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ã‚µãƒ¼ãƒã‹ã‚‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

`refresh` ã¨ã„ã†åå‰ã®åˆ¥ã®é–¢æ•°ã‚’ä½œæˆã—ã¾ã™ã€‚

```js
async function refresh() {
  await updateAccountData();
  updateDashboard();
}
```

ã“ã‚Œã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã® HTML ã‚’æ›´æ–°ã™ã‚‹å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ«ãƒ¼ãƒˆãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã¨ãã«å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚‹ã‚‚ã®ã§ã™ã€‚ã“ã‚Œã§ãƒ«ãƒ¼ãƒˆå®šç¾©ã‚’æ›´æ–°ã—ã¾ã™ã€‚

```js
const routes = {
  '/login': { templateId: 'login' },
  '/dashboard': { templateId: 'dashboard', init: refresh }
};
```

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã‚‹ã¨ã€æ›´æ–°ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚

---

## ğŸš€ ãƒãƒ£ãƒ¬ãƒ³ã‚¸

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãŸã³ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸãŒã€ã™ã¹ã¦ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã‹?

ã‚¢ãƒ—ãƒªãŒå‹•ä½œã™ã‚‹ãŸã‚ã«çµ¶å¯¾ã«å¿…è¦ãªã‚‚ã®ã ã‘ã‚’å«ã‚€ã‚ˆã†ã«ã€`localStorage` ã‹ã‚‰ä¿å­˜ãŠã‚ˆã³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã‚‚ã®ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã«ã€ä¸€ç·’ã«ä½œæ¥­ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

## ãƒ¬ãƒƒã‚¹ãƒ³å¾Œã®å°ãƒ†ã‚¹ãƒˆ

[ãƒ¬ãƒƒã‚¹ãƒ³å¾Œã®å°ãƒ†ã‚¹ãƒˆ](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/48?loc=ja)

## èª²é¡Œ

[ã€Œãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®è¿½åŠ ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å®Ÿè£…](assignment.ja.md)

èª²é¡Œã‚’çµ‚ãˆãŸå¾Œã®çµæœã®ä¸€ä¾‹ã§ã™ã€‚

![ã€Œãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®è¿½åŠ ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ä¾‹ã‚’ç¤ºã™ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ](../images/dialog.png)


export default ({ children }) => <div className="docs-content">{children}</div>;