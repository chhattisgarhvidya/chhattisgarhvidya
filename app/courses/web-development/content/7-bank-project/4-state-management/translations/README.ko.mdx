---
title: ì€í–‰ ì•± ì œì‘í•˜ê¸° íŒŒíŠ¸ 4: ìƒíƒœ ê´€ë¦¬ì˜ ì»¨ì…‰
description: ì—¬ê¸°ì„œ ìš°ë¦¬ê°€ ì‹¤ì œë¡œ í•´ê²°í•  ë¬¸ì œëŠ” ë¬´ì—‡ì¸ê°€ìš”?
lastUpdated: 2024-12-21T06:11:55.478Z
---

# ì€í–‰ ì•± ì œì‘í•˜ê¸° íŒŒíŠ¸ 4: ìƒíƒœ ê´€ë¦¬ì˜ ì»¨ì…‰

## ê°•ì˜ ì „ í€´ì¦ˆ

[Pre-lecture quiz](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/47?loc=ko)

### ì†Œê°œ

ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì»¤ì§€ë©´ì„œ, ëª¨ë“  ë°ì´í„° íë¦„ì„ ì¶”ì í•˜ëŠ” ê²ƒì€ ì–´ë µìŠµë‹ˆë‹¤. ì–´ë–¤ ì½”ë“œê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³ , ì–´ë–¤ í˜ì´ì§€ê°€ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³ , ì–¸ì œ ì–´ë””ì„œ ê°±ì‹ í•´ì•¼ í•˜ëŠ”ì§€... ê´€ë¦¬í•˜ê¸° ì–´ë ¤ìš´ ë³µì¡í•œ ì½”ë“œë¡œ ëë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì•±ì˜ ì—¬ëŸ¬ í˜ì´ì§€ê°€ ì„œë¡œ ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ê²½ìš°ì— íŠ¹íˆ ë” ê·¸ë ‡ìŠµë‹ˆë‹¤, ì˜ˆì‹œë¡œ ì‚¬ìš©ì ë°ì´í„°. *ìƒíƒœ ê´€ë¦¬*ì˜ ì»¨ì…‰ì€ í•­ìƒ ëª¨ë“  ì¢…ë¥˜ì˜ í”„ë¡œê·¸ë¨ì— ì¡´ì¬í–ˆì§€ë§Œ, ì›¹ ì•±ì´ ê³„ì† ë³µì¡í•´ì§€ë©´ì„œ ì´ì œëŠ” ê°œë°œí•˜ë©´ì„œ ê³ ë ¤í•´ì•¼ í•  í‚¤ í¬ì¸íŠ¸ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.

ì´ ìµœì¢… ë¶€ë¶„ì—ì„œëŠ”, ìƒíƒœ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ë‹¤ì‹œ ìƒê°í•´ë³´ë©°, ì–¸ì œë“  ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ì„ ì§€ì›í•˜ê³ , ì‚¬ìš©ì ì„¸ì…˜ì—ì„œ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ ì‘ì„±í•œ ì•±ì„ ì‚´í´ ë³´ê² ìŠµë‹ˆë‹¤.

### ì¤€ë¹„ë¬¼

ì´ ê°•ì˜ì˜ ì›¹ ì•± [data fetching](../../3-data/translations/README.ko.md) íŒŒíŠ¸ë¥¼ ì™„ë£Œí•´ë‘¬ì•¼ í•©ë‹ˆë‹¤. [Node.js](https://nodejs.org)ì™€ [run the server API](../../api/README.md)ë¥¼ ë¡œì»¬ì— ì„¤ì¹˜í•´ì•¼ ê³„ì • ì •ë³´ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ì—¬ ì„œë²„ê°€ ì˜ ì‹¤í–‰ë˜ê³  ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```sh
curl http://localhost:5000/api
# -> should return "Bank API v1.0.0" as a result
```

---

## ìƒíƒœ ê´€ë¦¬ì— ëŒ€í•˜ì—¬ ë‹¤ì‹œ ìƒê°í•˜ê¸°

[ì´ì „ ê°•ì˜](../../3-data/translations/README.ko.md)ì—ì„œëŠ”, í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ì€í–‰ ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” ì „ì—­ `account` ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì— ê¸°ì´ˆ ìƒíƒœ ê°œë…ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, í˜„ì¬ êµ¬í˜„ì—ëŠ” ì¡°ê¸ˆ ì·¨ì•½ì ì´ ìˆìŠµë‹ˆë‹¤. ëŒ€ì‹œë³´ë“œì—ì„œ í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì³ë³´ê¸° ë°”ëë‹ˆë‹¤. ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆë‚˜ìš”?

í˜„ì¬ ì½”ë“œì—ëŠ” 3ê°€ì§€ ì´ìŠˆê°€ ìˆìŠµë‹ˆë‹¤:

- ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œ ê³ ì¹˜ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸° ë•Œë¬¸ì—, ìƒíƒœê°€ ìœ ì§€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” ì—¬ëŸ¬ í•¨ìˆ˜ë“¤ì´ ìˆìŠµë‹ˆë‹¤. ì•±ì´ ì»¤ì§€ë©´ì„œ, ë³€ê²½ì ì„ ì¶”ì í•˜ê¸° ì–´ë µê³  ê°±ì‹ í•œ ê²ƒì„ ìŠì–´ë²„ë¦¬ê¸° ì‰½ìŠµë‹ˆë‹¤.
- ìƒíƒœê°€ ì •ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤, *ë¡œê·¸ì•„ì›ƒ*ì„ í´ë¦­í•˜ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ì— ìˆì–´ë„ ê³„ì • ë°ì´í„°ê°€ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

ì´ëŸ° ì´ìŠˆë¥¼ í•˜ë‚˜ì”© í•´ê²°í•˜ê¸° ìœ„í•´ ì½”ë“œë¥¼ ê°±ì‹ í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, ì½”ë“œ ì¤‘ë³µì´ ë” ë§ì´ ë°œìƒë˜ê³  ì•±ì´ ë” ë³µì¡í•´ì ¸ì„œ ìœ ì§€ ê´€ë¦¬ê°€ ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤. ë˜ëŠ” ëª‡ ë¶„ ë™ì•ˆ ì ì‹œ ë©ˆì¶°ì„œ ë‹¤ì‹œ ê¸°íší•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

> ì—¬ê¸°ì„œ ìš°ë¦¬ê°€ ì‹¤ì œë¡œ í•´ê²°í•  ë¬¸ì œëŠ” ë¬´ì—‡ì¸ê°€ìš”?

[State management](https://en.wikipedia.org/wiki/State_management)ëŠ” ë‹¤ìŒ 2ê°€ì§€ íŠ¹ì •í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì¢‹ì€ ì ‘ê·¼ ë°©ì‹ì„ ì°¾ìŠµë‹ˆë‹¤:

- ì´í•´í•˜ê¸° ì‰½ê²Œ ì•±ì˜ ë°ì´í„° íë¦„ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€ìš”?
- ìƒíƒœ ë°ì´í„°ë¥¼ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì™€ í•­ìƒ ë™ê¸°í™”í•˜ëŠ” ë°©ë²•ì€ ìˆë‚˜ìš” (í˜¹ì€ ê·¸ ë°˜ëŒ€ë¡œ)?

ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•œ í›„ì—ëŠ” ë‹¤ë¥¸ ì´ìŠˆê°€ ì´ë¯¸ ê³ ì³ì¡Œê±°ë‚˜ ë” ì‰½ê²Œ ê³ ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì—¬ëŸ¬ ê°€ëŠ¥í•œ ë°©ì‹ë“¤ì´ ìˆì§€ë§Œ, **ë°ì´í„°ë¥¼ ì¤‘ì•™ ì§‘ì¤‘í™”í•˜ê³  ë³€ê²½í•˜ëŠ” ë°©ë²•**ìœ¼ë¡œ êµ¬ì„±ëœ ê³µí†µ ì†”ë£¨ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë°ì´í„° íë¦„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

![Schema showing the data flows between the HTML, user actions and state](.././images/data-flow.png)

> ë°ì´í„°ì™€ ë·° ê°±ì‹ ì„ ìë™ìœ¼ë¡œ ì—°ê²°í•˜ëŠ” ë¶€ë¶„ì€, [Reactive Programming](https://en.wikipedia.org/wiki/Reactive_programming)ì˜ ê³ ê¸‰ ì»¨ì…‰ê³¼ ì—°ê²°ë˜ì—ˆìœ¼ë¯€ë¡œ ì—¬ê¸°ì„œ ë‹¤ë£¨ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ê¹Šê²Œ ë¶„ì„í•œë‹¤ë©´ ì¢‹ê²Œ íŒ”ë¡œìš° ì—…í•  ì£¼ì œì…ë‹ˆë‹¤.

âœ… ìƒíƒœ ê´€ë¦¬ì— ëŒ€í•œ ì ‘ê·¼ ë°©ì‹ì´ ë‹¤ë¥¸ ìˆ˜ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆìœ¼ë©°, [Redux](https://redux.js.org)ëŠ” ì¸ê¸°ìˆëŠ” ì˜µì…˜ì…ë‹ˆë‹¤. í° ì›¹ ì•±ì—ì„œ ë§ˆì£¼í•  ìˆ˜ ìˆëŠ” ì ì¬ì  ì´ìŠˆì™€ í•´ê²° ë°©ì‹ì„ ì•Œ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì‚¬ìš©ëœ ì»¨ì…‰ê³¼ íŒ¨í„´ì„ ì‚´í´ë³´ì„¸ìš”.

### ì‘ì—…

ì¡°ê¸ˆ ë¦¬íŒ©í† ë§ì„ í•´ë³´ë©´ì„œ ì‹œì‘í•´ë´…ë‹ˆë‹¤. `account` ì„ ì–¸ì„ ë°”ê¿‰ë‹ˆë‹¤:

```js
let account = null;
```

With:

```js
let state = {
  account: null
};
```

ì´ ì•„ì´ë””ì–´ëŠ” ëª¨ë“  ì•± ë°ì´í„°ë¥¼ ë‹¨ì¼ ìƒíƒœ ê°œì²´ì—ì„œ *ì¤‘ì•™ì— ëª¨ìœ¼ëŠ”* ê²ƒ ì…ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœì—ì„œëŠ” `account`ë§Œ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ ë§ì´ ë³€í•˜ì§€ ì•Šì§€ë§Œ, ë°œì „ì„ ìœ„í•œ ê¸¸ì„ ë‹¦ì•„ë‘¡ë‹ˆë‹¤.

ë˜í•œ ê·¸ê²ƒì„ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ë¥¼ ê°±ì‹ í•´ì•¼ í•©ë‹ˆë‹¤. `register()`ì™€ `login()` í•¨ìˆ˜ì—ì„œ, `account = ...`ë¥¼ `state.account = ...`ë¡œ ë°”ê¿‰ë‹ˆë‹¤.

`updateDashboard()` í•¨ìˆ˜ ìƒë‹¨ì—, ì´ ì¤„ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

```js
const account = state.account;
```

ì´ ë¦¬íŒ©í† ë§ë§Œìœ¼ë¡œëŠ” ë§ì€ ê°œì„ ì´ ì´ë£¨ì–´ì§€ì§€ ì•Šì§€ë§Œ, ì•„ì´ë””ì–´ëŠ” ë‹¤ìŒ ë³€ê²½ì ì˜ í† ëŒ€ë¥¼ ë§ˆë ¨í•´ì¤ë‹ˆë‹¤.

## ë°ì´í„° ë³€ê²½ ì¶”ì í•˜ê¸°

ë°ì´í„°ë¡œ ì €ì¥í•  `state` ê°ì²´ë¥¼ ë‘ì—ˆìœ¼ë¯€ë¡œ, ë‹¤ìŒ ë‹¨ê³„ëŠ” ê°±ì‹  ì‘ì—…ì„ ì¤‘ì•™ ì§‘ì¤‘í™”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ëª©í‘œëŠ” ëª¨ë“  ë³€ê²½ì ê³¼ ë°œìƒ ì‹œì ì„ ì‰½ê²Œ â€‹â€‹ì¶”ì í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

`state` ê°ì²´ê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë ¤ë©´, [*immutable*](https://en.wikipedia.org/wiki/Immutable_object)í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì¦‰, ì „í˜€ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë˜í•œ ë³€ê²½í•˜ë ¤ëŠ” ê²½ìš°ì—ëŠ” ìƒˆë¡œìš´ ìƒíƒœ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ ëœë‹¤ëŠ” ì ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´, ì ì¬ì ìœ¼ë¡œ ì›í•˜ì§€ ì•ŠëŠ” [side effects](https://en.wikipedia.org/wiki/Side_effect_(computer_science))ì— ë³´í˜¸í•˜ë„ë¡ ë§Œë“¤ê³ , undo/redoë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ì•±ì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ì— ëŒ€í•œ ê°€ëŠ¥ì„±ì„ ì—´ì–´ ë””ë²„ê¹…ì„ ë” ì‰½ê²Œ ë§Œë“­ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ìë©´, ìƒíƒœì— ëŒ€í•œ ëª¨ë“  ë³€ê²½ì ì„ ë‚¨ê¸°ê³  ìœ ì§€í•˜ì—¬ ë²„ê·¸ì˜ ì›ì¸ì„ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

JavaScriptì—ì„œ, [`Object.freeze()`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ë²„ì „ì˜ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ ê°ì²´ë¥¼ ë°”ê¾¸ë ¤ê³  í•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤.

âœ… *shallow*ì™€ *deep* ë¶ˆë³€ ê°ì²´ì˜ ì°¨ì´ì ì„ ì•Œê³  ê³„ì‹œë‚˜ìš”? [here](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze#What_is_shallow_freeze)ì—ì„œ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì‘ì—…

ìƒˆë¡œìš´ `updateState()` í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤:

```js
function updateState(property, newData) {
  state = Object.freeze({
    ...state,
    [property]: newData
  });
}
```

ì´ í•¨ìˆ˜ì—ì„œëŠ”, ìƒˆë¡œìš´ ìƒíƒœ ê°ì²´ë¥¼ ë§Œë“¤ê³  [*spread (`...`) operator*](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Spread_in_object_literals)ë¡œ ì´ì „ ìƒíƒœì˜ ë°ì´í„°ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤. ê·¸ëŸ¬ê³   í• ë‹¹ì„ ìœ„í•´ [bracket notation](https://developer.mozilla.org/docs/Web/JavaScript/Guide/Working_with_Objects#Objects_and_properties) `[property]`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœ ê°ì²´ì˜ íŠ¹ì •í•œ ì†ì„±ì„ ìƒˆë¡œìš´ ë°ì´í„°ë¡œ ë‹¤ì‹œ ì •ì˜í•©ë‹ˆë‹¤. ìµœì¢…ì ìœ¼ë¡œ, ë³€ê²½ë˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ `Object.freeze()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ë¥¼ ì ê¸‰ë‹ˆë‹¤. ì§€ê¸ˆ ìƒíƒœì—ëŠ” `account` ì†ì„±ë§Œ ì €ì¥ë˜ì–´ ìˆì§€ë§Œ, ì´ ì ‘ê·¼ ë°©ì‹ìœ¼ë¡œ ìƒíƒœì— í•„ìš”í•œ ìˆœê°„ë§ˆë‹¤ ë§ì€ ì†ì„±ë“¤ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ ì´ˆê¸° ìƒíƒœê°€ ë™ê²°ë˜ë„ë¡ `state` ì´ˆê¸°í™” ì‘ì—…ë„ ê°±ì‹ í•©ë‹ˆë‹¤:

```js
let state = Object.freeze({
  account: null
});
```

ê·¸ëŸ° ë‹¤ìŒ, `state.account = result;` í• ë‹¹ì„ ì´ ê²ƒìœ¼ë¡œ ëŒ€ì²´í•˜ì—¬ `register` í•¨ìˆ˜ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤:

```js
updateState('account', result);
```

`login` í•¨ìˆ˜ì—ì„œë„ ë™ì¼í•˜ê²Œ ì§„í–‰í•˜ê³ , `state.account = data;`ë„ ì´ ê²ƒìœ¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤:

```js
updateState('account', data);
```

ì´ì œ ì‚¬ìš©ìê°€ *Logout*ì„ í´ë¦­ í•  ë•Œ ê³„ì • ë°ì´í„°ê°€ ì§€ì›Œì§€ì§€ ì•ŠëŠ” ì´ìŠˆë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìƒˆë¡œìš´ í•¨ìˆ˜ `logout()`ì„ ë§Œë“­ë‹ˆë‹¤:

```js
function logout() {
  updateState('account', null);
  navigate('/login');
}
```

`updateDashboard()` ì—ì„œ, ë¦¬ë‹¤ì´ë ‰ì…˜í•˜ëŠ” `return navigate('/login');`ì„ `return logout()`ìœ¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤;

ìƒˆë¡œìš´ ê³„ì •ìœ¼ë¡œ ê°€ì…ì„ ì‹œë„í•˜ë©´, ë¡œê·¸ì•„ì›ƒí•˜ê³  ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì—¬ ëª¨ë‘ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> Tip: `updateState()` í•˜ë‹¨ì— `console.log(state)`ë¥¼ ì¶”ê°€í•˜ê³  ë¸Œë¼ìš°ì €ì˜ ê°œë°œ ë„êµ¬ì—ì„œ ì½˜ì†”ì„ ì—´ë©´ ëª¨ë“  ìƒíƒœ ë³€ê²½ì ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ìƒíƒœ ìœ ì§€í•˜ê¸°

ëŒ€ë¶€ë¶„ ì›¹ ì•±ì´ ì˜ ì‘ë™í•˜ë ¤ë©´ ë°ì´í„°ë¥¼ ìœ ì§€í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ë˜ê³  ìš°ë¦¬ ì¼€ì´ìŠ¤ì—ëŠ” ì‚¬ìš©ì ê³„ì • ë°ì´í„°ì²˜ëŸ¼, ì„œë²„ APIë¥¼ í†µí•´ ì ‘ê·¼ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë•Œë¡œëŠ”, ë” ì¢‹ì€ ì‚¬ìš©ì ê²½í—˜ì´ë‚˜ ë¡œë”© í¼í¬ë¨¼ìŠ¤ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ì„œ, ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ì¤‘ì¸ í´ë¼ì´ì–¸íŠ¸ ì•±ì— ì¼ë¶€ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒë„ í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤.

ë¸Œë¼ìš°ì €ì—ì„œ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ë ¤ë©´, ìŠ¤ìŠ¤ë¡œì—ê²Œ ëª‡ ì¤‘ìš”í•œ ì§ˆë¬¸ì„ í•´ì•¼í•©ë‹ˆë‹¤:

- *ë¯¼ê°í•œ ë°ì´í„°ì¸ê°€ìš”?* ì‚¬ìš©ì ì•”í˜¸ì™€ ê°™ì€, ë¯¼ê°í•œ ë°ì´í„°ëŠ” í´ë¼ì´ì–¸íŠ¸ì— ì €ì¥í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
- *ë°ì´í„°ë¥¼ ì–¼ë§ˆë‚˜ ì˜¤ë˜ ë³´ê´€í•´ì•¼ í•˜ë‚˜ìš”?* í˜„ì¬ ì„¸ì…˜ì—ì„œë§Œ ë°ì´í„°ì— ì ‘ê·¼í•˜ê±°ë‚˜ ê³„ì† ì €ì¥í•  ê³„íšì¸ê°€ìš”?

ë‹¬ì„±í•˜ë ¤ëŠ” ëª©í‘œì— ë”°ë¼, ì›¹ ì•± ì•ˆì—ì„œ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•ì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´, URLì„ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ ì¿¼ë¦¬ë¥¼ ì €ì¥í•˜ê³ , ì‚¬ìš©ìë¼ë¦¬ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. [authentication](https://en.wikipedia.org/wiki/Authentication) ì •ë³´ì²˜ëŸ¼, ë°ì´í„°ë¥¼ ì„œë²„ì™€ ê³µìœ í•´ì•¼í•˜ëŠ” ê²½ìš°ì—ë„ [HTTP cookies](https://developer.mozilla.org/docs/Web/HTTP/Cookies)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ ì˜µì…˜ìœ¼ë¡œëŠ” ë°ì´í„° ì €ì¥ì„ ìœ„í•´ ì—¬ëŸ¬ ë¸Œë¼ìš°ì € API ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ ì¤‘ 2ê°€ì§€ê°€ íŠ¹íˆ í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤:

- [`localStorage`](https://developer.mozilla.org/docs/Web/API/Window/localStorage): [Key/Value store](https://en.wikipedia.org/wiki/Key%E2%80%93value_database)ëŠ” ë‹¤ë¥¸ ì„¸ì…˜ì—ì„œ í˜„ì¬ ì›¹ ì‚¬ì´íŠ¸ì— ëŒ€í•œ íŠ¹ì • ë°ì´í„°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €ì¥ëœ ë°ì´í„°ëŠ” ë§Œë£Œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- [`sessionStorage`](https://developer.mozilla.org/docs/Web/API/Window/sessionStorage): ì´ëŠ” ì„¸ì…˜ì´ ëë‚  ë•Œ(ë¸Œë¼ìš°ì €ê°€ ë‹«í ë•Œ)ì— ì €ì¥ëœ ë°ì´í„°ê°€ ì§€ì›Œì§„ë‹¤ëŠ” ì ì„ ì œì™¸í•˜ë©´ `localStorage`ì™€ ë™ì¼í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.

ì´ ë‘ APIëŠ” ëª¨ë‘ [strings](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)ë§Œ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³µì¡í•œ ê°ì²´ë¥¼ ì €ì¥í•˜ë ¤ë©´, [`JSON.stringify()`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)ë¥¼ ì‚¬ìš©í•˜ì—¬ [JSON](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON) í¬ë§·ìœ¼ë¡œ ì§ë ¬í™”í•´ì•¼ í•©ë‹ˆë‹¤.

âœ… ì„œë²„ì—ì„œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ì›¹ ì•±ì„ ë§Œë“œë ¤ë©´, [`IndexedDB` API](https://developer.mozilla.org/docs/Web/API/IndexedDB_API)ë¡œ í´ë¼ì´ì–¸íŠ¸ì— ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ê³ ê¸‰ ì‚¬ìš© ì¼€ì´ìŠ¤ì´ê±°ë‚˜, ì‚¬ìš©í•˜ê¸° ë³µì¡í•œ ë§ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•´ì•¼ í•  ë•Œì— ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤.

### ì‘ì—…

*Logout* ë²„íŠ¼ì„ ëª…ì‹œì ìœ¼ë¡œ í´ë¦­í•  ë•Œê¹Œì§€ ë¡œê·¸ì¸ ìƒíƒœê°€ ìœ ì§€ë˜ê¸°ë¥¼ ì›í•˜ë¯€ë¡œ, `localStorage`ë¡œ ê³„ì • ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ë¨¼ì €, ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©í•  í‚¤ë¥¼ ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.

```js
const storageKey = 'savedAccount';
```

ê·¸ëŸ¬ê³  `updateState()` í•¨ìˆ˜ì˜ í•˜ë‹¨ì— ì´ ì¤„ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

```js
localStorage.setItem(storageKey, JSON.stringify(state.account));
```

ì´ë¥¼ í†µí•´, ì´ì „ì˜ ëª¨ë“  ìƒíƒœë¥¼ ê°±ì‹ í•˜ëŠ” ì‘ì—…ì´ ê°€ìš´ë°ë¡œ ëª¨ì„ì— ë”°ë¼ ì‚¬ìš©ì ê³„ì • ë°ì´í„°ê°€ ìœ ì§€ë˜ê³  í•­ìƒ ìµœì‹ -ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ì´ê²ƒìœ¼ë¡œ ì´ì „ ëª¨ë“  ë¦¬íŒ©í„°ë§ ì‘ì—…ì˜ í˜œíƒì„ ë°›ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤ ğŸ™‚.

ë” ë§ì€ ì´ˆê¸°í™” ì½”ë“œë¥¼ ê°€ì§€ê²Œ ë  ì˜ˆì •ì´ë¯€ë¡œ ìƒˆë¡œìš´ `init` í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤, ì—¬ê¸°ì—ëŠ” `app.js`ì˜ í•˜ë‹¨ì— ì´ì „ ì½”ë“œê°€ í¬í•¨ë©ë‹ˆë‹¤:

```js
function init() {
  const savedAccount = localStorage.getItem(storageKey);
  if (savedAccount) {
    updateState('account', JSON.parse(savedAccount));
  }

  // Our previous initialization code
  window.onpopstate = () => updateRoute();
  updateRoute();
}

init();
```

ì—¬ê¸°ì—ì„œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³ , ê·¸ì— ë”°ë¼ì„œ ìƒíƒœë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ê°±ì‹ í•˜ë‹¤ê°€ ìƒíƒœì— ì˜ì¡´í•˜ëŠ” ì½”ë“œê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë¼ìš°í„°ë¥¼ ê°±ì‹ í•˜ê¸° *ì „ì—* í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

ì´ì œ ê³„ì • ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê³  ìˆìœ¼ë¯€ë¡œ, *ëŒ€ì‹œë³´ë“œ* í˜ì´ì§€ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ë³¸ í˜ì´ì§€ë¡œ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë°ì´í„°ê°€ ì—†ë‹¤ë©´, ëŒ€ì‹œë³´ë“œëŠ” ì–¸ì œë‚˜ *ë¡œê·¸ì¸* í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŒ…í•©ë‹ˆë‹¤. `updateRoute ()`ì—ì„œ, `return navigate('/login');`ì„ `return navigate('dashboard');`ë¡œ ë°”ê¿‰ë‹ˆë‹¤.

ì´ì œ ì•±ì— ë¡œê·¸ì¸í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì³ë³´ë©´, ëŒ€ì‹œë³´ë“œì— ë‚¨ì•„ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì´ ì—…ë°ì´íŠ¸ë¡œ ëª¨ë“  ì´ˆê¸° ì´ìŠˆë¥¼ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤...

## ë°ì´í„° ìƒˆë¡œ ê³ ì¹˜ê¸°

...ê·¸ëŸ¬ë‚˜ ìƒˆë¡œìš´ ê²ƒì„ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì›ìŠ¤!

`test` ê³„ì •ì„ ì‚¬ìš©í•˜ì—¬ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•˜ë©´, í„°ë¯¸ë„ì—ì„œ ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ë§Œë“­ë‹ˆë‹¤:

```sh
curl --request POST \
     --header "Content-Type: application/json" \
     --data "{ \"date\": \"2020-07-24\", \"object\": \"Bought book\", \"amount\": -20 }" \
     http://localhost:5000/api/accounts/test/transactions
```

ì§€ê¸ˆ ë¸Œë¼ìš°ì €ì—ì„œ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì³ë´…ë‹ˆë‹¤. ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚¬ë‚˜ìš”? ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì´ ë³´ì´ë‚˜ìš”?

ìƒíƒœëŠ” `localStorage` ë•ë¶„ì— ë¬´í•œìœ¼ë¡œ ìœ ì§€í•˜ì§€ë§Œ, ì•±ì—ì„œ ë¡œê·¸ì•„ì›ƒí•˜ê³  ë‹¤ì‹œ ë¡œê·¸ì¸í•  ë•Œê¹Œì§€ ê°±ì‹ í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì„ ì˜ë¯¸í•©ë‹ˆë‹¤!

í•´ê²°í•  ìˆ˜ ìˆëŠ” í•œ ê°€ì§€ ì „ëµì€ ëŒ€ì‹œë³´ë“œë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œë§ˆë‹¤ ê³„ì • ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ì„œ, ë°ì´í„°ê°€ ì˜¤ë˜ë˜ëŠ” í˜„ìƒì„ ë°©ì§€í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.

### ì‘ì—…

ìƒˆë¡œìš´ í•¨ìˆ˜ `updateAccountData`ë¥¼ ë§Œë“­ë‹ˆë‹¤:

```js
async function updateAccountData() {
  const account = state.account;
  if (!account) {
    return logout();
  }

  const data = await getAccount(account.user);
  if (data.error) {
    return logout();
  }

  updateState('account', data);
}
```

ì´ ë©”ì†Œë“œëŠ” í˜„ì¬ ë¡œê·¸ì¸ë˜ì–´ ìˆëŠ”ì§€ ë³¸ ë‹¤ìŒì— ì„œë²„ì—ì„œ ê³„ì • ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.

`refresh`ë¼ê³  ì´ë¦„ì„ ì§€ì€ ë˜ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤:

```js
async function refresh() {
  await updateAccountData();
  updateDashboard();
}
```

ì´ëŠ” ê³„ì • ë°ì´í„°ë¥¼ ê°±ì‹ í•˜ê³ ë‚˜ì„œ, ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ì˜ HTMLë„ ê°±ì‹ í•˜ê²Œ ë©ë‹ˆë‹¤. ëŒ€ì‹œë³´ë“œ ë¼ìš°í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œë§ˆë‹¤ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ ë¼ìš°í„° ì •ì˜ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤:

```js
const routes = {
  '/login': { templateId: 'login' },
  '/dashboard': { templateId: 'dashboard', init: refresh }
};
```

ì§€ê¸ˆ ëŒ€ì‹œë³´ë“œë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤, ê°±ì‹ ëœ ê³„ì • ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

---

## ğŸš€ ë„ì „

ì´ì œ ëŒ€ì‹œë³´ë“œë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œë§ˆë‹¤ ê³„ì • ë°ì´í„°ê°€ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ì§€ëŠ”ë°, ì—¬ì „íˆ *ëª¨ë“  ê³„ì •* ë°ì´í„°ë¥¼ ìœ ì§€í•´ì•¼ ëœë‹¤ê³  ìƒê°í•˜ë‚˜ìš”?

ì•±ì´ ë™ì‘í•˜ëŠ” ë° ê¼­ í•„ìš”í•œ ê²ƒë§Œ ìˆë„ë¡ `localStorage` ì— ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¨ í•­ëª©ì„ í•¨ê»˜ ë°”ê¿”ë´…ë‹ˆë‹¤.

## ê°•ì˜ í›„ í€´ì¦ˆ

[Post-lecture quiz](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/48?loc=ko)

## ê³¼ì œ

[Implement "Add transaction" dialog](../assignment.md)

ë‹¤ìŒì€ ê³¼ì œë¥¼ ì™„ë£Œí•œ ë’¤ì˜ ì˜ˆì‹œ ê²°ê³¼ì…ë‹ˆë‹¤:

![Screenshot showing an example "Add transaction" dialog](.././images/dialog.png)


export default ({ children }) => <div className="docs-content">{children}</div>;