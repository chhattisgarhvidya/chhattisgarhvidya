---
title: å»ºç«‹å¤ªç©ºéŠæˆ² Part 1ï¼šç°¡ä»‹
description: No description available
lastUpdated: 2024-12-21T06:11:55.013Z
---

# å»ºç«‹å¤ªç©ºéŠæˆ² Part 1ï¼šç°¡ä»‹

![å½±ç‰‡](../../images/pewpew.gif)

## èª²å‰æ¸¬é©—

[èª²å‰æ¸¬é©—](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/29?loc=zh_tw)

### éŠæˆ²é–‹ç™¼ä¸­çš„ç¹¼æ‰¿(Inheritance)èˆ‡çµ„åˆ(Composition)

åœ¨ä¹‹å‰çš„èª²ç¨‹ä¸­ï¼Œå› ç‚ºå°ˆæ¡ˆè¼ƒå°çš„è¦æ¨¡ï¼Œæˆ‘å€‘ä¸éœ€è¦å»æ“”æ†‚æ‡‰ç”¨ç¨‹å¼çš„è¨­è¨ˆçµæ§‹ã€‚ç„¶è€Œï¼Œç•¶ä½ çš„æ‡‰ç”¨ç¨‹å¼è¦æ¨¡è¶Šä¾†è¶Šå¤§æ™‚ï¼Œçµæ§‹çš„é¸æ“‡å°±æ˜¯ä¸€å¤§èª²é¡Œã€‚åœ¨ JavaScript ä¸­ï¼Œæœ‰å…©ç¨®å¤§æ–¹å‘ä¾†å»ºç«‹é¾å¤§çš„æ‡‰ç”¨ç¨‹å¼ï¼š*çµ„åˆ(Composition)*èˆ‡*ç¹¼æ‰¿(Inheritance)*ã€‚å®ƒå€‘æœ‰å„è‡ªçš„å„ªç¼ºé»ï¼Œæˆ‘å€‘æœƒè—‰ç”±éŠæˆ²å…§å®¹ä¾†é€²è¡Œèªªæ˜ã€‚

âœ… å…¶ä¸­ä¸€æœ¬æœ‰åçš„ç¨‹å¼è¨­è¨ˆç”¨æ›¸æ˜¯æœ‰é—œæ–¼[è¨­è¨ˆæ¨¡å¼](https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%9F%BA%E7%A1%80)ã€‚

åœ¨éŠæˆ²ä¸­ä½ æœƒæœ‰`éŠæˆ²ç‰©ä»¶`ï¼Œé¡¯ç¤ºåœ¨ç•«é¢ä¸­ã€‚é€™ä»£è¡¨å®ƒå€‘åœ¨ç¬›å¡çˆ¾åº§æ¨™ç³»ä¸­æœ‰å„è‡ªçš„ä½ç½®ï¼Œä»¥ `x` èˆ‡ `y` åº§æ¨™é»å®šç¾©ã€‚ç•¶ä½ åœ¨é–‹ç™¼éŠæˆ²æ™‚ï¼Œä½ æœƒæ³¨æ„åˆ°æ‰€æœ‰çš„éŠæˆ²ç‰©ä»¶éƒ½æœ‰ä¸€å¥—æ¨™æº–çš„è¦ç¯„ï¼Œå’Œå¤§å¤šæ•¸çš„éŠæˆ²ç›¸ä¼¼ï¼Œé€šå¸¸æœƒæœ‰é€™äº›å…ƒç´ ï¼š

- **é©åœ°æ€§** å¤§å¤šæ•¸éŠæˆ²å…ƒç´ éƒ½æ˜¯å»ºç«‹åœ¨ä½ç½®ä¸Šçš„ã€‚é€™ä»£è¡¨ä»–å€‘æœ‰å„è‡ªçš„æ‰€åœ¨è™•ï¼Œä¸€çµ„ `x` èˆ‡ `y`ã€‚
- **å¯ç§»å‹•çš„** é€™äº›ç‰©ä»¶å¯ä»¥ç§»å‹•åˆ°æ–°çš„ä½ç½®ã€‚å…¸å‹ä¾†èªªæœ‰è‹±é›„ã€æ€ªç‰©æˆ–æ˜¯ NPC(Non Player Character)ï¼Œä½†æœ‰äº›ä¾‹å¤–ï¼Œå¥½æ¯”æ˜¯æ¨¹é€™ç¨®å¸¸é§ç‰©ä»¶ã€‚
- **å¯è‡ªæ¯€çš„** é€™äº›ç‰©ä»¶åªèƒ½å­˜åœ¨æ–¼ä¸€å°æ®µæ™‚é–“ï¼Œæ¥è‘—å®ƒå€‘å°±æœƒè‡ªæˆ‘åˆªé™¤ã€‚é€šå¸¸é€™æ˜¯`æ­»äº¡`æˆ–æ˜¯`è¢«æ‘§æ¯€`çš„å¸ƒæ—è¨Šè™Ÿå‚³éçµ¦éŠæˆ²å¼•æ“ï¼Œå‘ŠçŸ¥ç‰©ä»¶ä¸å†éœ€è¦è¢«æç¹ªå‡ºä¾†ã€‚
- **å†·å»æ™‚é–“** ã€Œå†·å»æ™‚é–“ã€æ˜¯å­˜æ´»é€±æœŸçŸ­çš„å…¸å‹ç‰©ä»¶å±¬æ€§ã€‚å¥½æ¯”æ˜¯ä¸€æ®µæ–‡å­—ã€çˆ†ç‚¸çš„è¦–è¦ºç‰¹æ•ˆï¼Œåªèƒ½å‘ˆç¾æ•¸æ¯«ç§’çš„æ™‚é–“ã€‚

âœ… æƒ³æƒ³çœ‹éŠæˆ²å°ç²¾éˆ(Pac-Man)ã€‚ä½ èƒ½è¾¨åˆ¥å‡ºç¬¦åˆä¸Šè¿°æ¸…å–®çš„å…¶ä¸­å››ç¨®ç‰©ä»¶å—ï¼Ÿ

### è¡Œç‚ºè¡¨é”

ä»¥ä¸Šçš„æ•˜è¿°çš†åœ¨è¡¨é”éŠæˆ²ç‰©ä»¶æ‰€é€²è¡Œçš„è¡Œç‚ºã€‚é‚£æˆ‘å€‘è©²å¦‚ä½•å»ç·¨å¯«å®ƒå€‘å‘¢ï¼Ÿæˆ‘å€‘å¯ä»¥ä½¿ç”¨æ–¹æ³•(methods)é€£æ¥ classes æˆ–æ˜¯ç‰©ä»¶(objects)ä¾†è¡¨é”é€™äº›è¡Œç‚ºã€‚

**Classes**

é€™å€‹æƒ³æ³•æ˜¯çµåˆ `classes` èˆ‡`ç¹¼æ‰¿`çš„æ–¹å¼ä¾†åœ¨ class ä¸­æ·»åŠ ç‰¹å®šè¡Œç‚ºã€‚

âœ… ç¹¼æ‰¿æ˜¯ä¸€å€‹é‡è¦æ¦‚å¿µã€‚åœ¨[æœ‰é—œç¹¼æ‰¿çš„ MDN æ–‡ç« ä¸­](https://developer.mozilla.org/docs/Web/JavaScript/Inheritance_and_the_prototype_chain)å­¸ç¿’æ›´å¤šå…§å®¹ã€‚

ä»¥ç¨‹å¼ç¢¼ä¾†è¡¨é”çš„è©±ï¼Œä¸€å€‹éŠæˆ²ç‰©ä»¶é€šå¸¸æœƒå‘ˆç¾é€™ç¨®å½¢å¼ï¼š

```javascript

//è¨­å®š class GameObject
class GameObject {
  constructor(x, y, type) {
    this.x = x;
    this.y = y;
    this.type = type;
  }
}

//é€™å€‹ class æœƒç¹¼æ‰¿ GameObject ä¸­ class å…§å®¹
class Movable extends GameObject {
  constructor(x,y, type) {
    super(x,y, type)
  }

//é€™å€‹å¯ç§»å‹•ç‰©ä»¶å¯ä»¥åœ¨ç•«é¢ä¸Šç§»å‹•
  moveTo(x, y) {
    this.x = x;
    this.y = y;
  }
}

//é€™æ˜¯ç‰¹å®šçš„ class ç¹¼æ‰¿ Movable classï¼Œå®ƒèƒ½ä½¿ç”¨æ‰€æœ‰ç¹¼æ‰¿åˆ°çš„å±¬æ€§å…§å®¹
class Hero extends Movable {
  constructor(x,y) {
    super(x,y, 'Hero')
  }
}

//å¦ä¸€æ–¹é¢ï¼Œé€™å€‹ class åªç¹¼æ‰¿åˆ° GameObject çš„å…§å®¹
class Tree extends GameObject {
  constructor(x,y) {
    super(x,y, 'Tree')
  }
}

//è‹±é›„å¯ä»¥ç§»å‹•......
const hero = new Hero();
hero.moveTo(5,5);

//ä½†æ¨¹æœ¨å»ä¸èƒ½
const tree = new Tree();
```

âœ… èŠ±é»æ™‚é–“é‡æ–°æ§‹æ€å°ç²¾éˆ(Pac-Man)çš„ä¸»è§’ï¼Œæˆ–æ˜¯ Inkyã€Pinky èˆ‡ Blinky é€™å¹¾éš»é¬¼é­‚ã€‚å®ƒå€‘è©²å¦‚ä½•ä»¥ JavaScript è¡¨ç¾ï¼Ÿ

**çµ„åˆ**

å¦ä¸€ç¨®è™•ç†ç‰©ä»¶ç¹¼æ‰¿çš„æ–¹å¼ç‚º*çµ„åˆ(Composition)*ã€‚ç‰©ä»¶ä»¥é€™ç¨®æ–¹å¼å‘ˆç¾å®ƒå€‘çš„è¡Œç‚ºï¼š

```javascript
//å»ºç«‹å¸¸æ•¸ gameObject
const gameObject = {
  x: 0,
  y: 0,
  type: ''
};

//...èˆ‡å¸¸æ•¸ movable
const movable = {
  moveTo(x, y) {
    this.x = x;
    this.y = y;
  }
}
//å¸¸æ•¸ movableObject æ˜¯ gameObject èˆ‡ movable çš„çµ„åˆ
const movableObject = {...gameObject, ...movable};

//åˆ©ç”¨å‡½å¼å»ºç«‹æ–°çš„è‹±é›„ï¼Œç¹¼æ‰¿ movableObject çš„å…§å®¹
function createHero(x, y) {
  return {
    ...movableObject,
    x,
    y,
    type: 'Hero'
  }
}
//...èˆ‡å¸¸é§ç‰©ä»¶åªç¹¼æ‰¿ gameObject çš„å±¬æ€§
function createStatic(x, y, type) {
  return {
    ...gameObject
    x,
    y,
    type
  }
}
//å»ºç«‹å¯ä»¥ç§»å‹•çš„è‹±é›„
const hero = createHero(10,10);
hero.moveTo(5,5);
//å’Œå»ºç«‹åªèƒ½ä½‡ç«‹æ–¼æ­¤çš„æ¨¹æœ¨
const tree = createStatic(0,0, 'Tree'); 
```

**æˆ‘è©²ä½¿ç”¨å“ªä¸€ç¨®è¨­è¨ˆæ¨¡å¼ï¼Ÿ**

é€™éƒ½å–æ±ºæ–¼ä½ é¸æ“‡ä½•ç¨®è¨­è¨ˆæ¨¡å¼ã€‚JavaScript æ”¯æ´é€™å…©ç¨®ç¯„ä¾‹ã€‚

--

å¦ä¸€ç¨®åœ¨éŠæˆ²é–‹ç™¼ä¸­å¸¸è¦‹çš„è¨­è¨ˆæ¨¡å¼è² è²¬è™•ç†ç©å®¶çš„éŠæˆ²è¡¨ç¾èˆ‡éŠæˆ²é«”é©—ã€‚

## ç™¼å¸ƒè¨‚é–±è¨­è¨ˆæ¨¡å¼

âœ… Pub/Sub å…¨åç‚º 'publish-subscribe'

é€™å€‹è¨­è¨ˆæ¨¡å¼å°‡æ‡‰ç”¨ç¨‹å¼å…§ä¸åŒçš„æ¨¡çµ„åˆ†é–‹è™•ç†ï¼Œè®“å½¼æ­¤ä¸çŸ¥é“å½¼æ­¤çš„è¡Œç‚ºã€‚ç‚ºä½•è¦é€™æ¨£åšï¼Ÿé€™è®“æˆ‘å€‘ç¸½è§€ä¸Šæ›´è¼•æ˜“åœ°äº†è§£å„å€‹æ¨¡çµ„çš„è¡Œç‚ºã€‚ä¹Ÿå¯ä»¥åœ¨ä½ æƒ³è¦æ™‚è¼•æ˜“åœ°æ”¹è®Šæ¨¡çµ„çš„è¡Œç‚ºæ¨¡å¼ã€‚æˆ‘å€‘è©²å¦‚ä½•å¯¦è¸å®ƒå‘¢ï¼Ÿæˆ‘å€‘å…ˆå»ºç«‹é€™å¹¾å€‹æ¦‚å¿µï¼š

- **è¨Šæ¯**ï¼š ä¸€å€‹è¨Šæ¯é€šå¸¸æœƒä»¥æ–‡å­—å­—ä¸²èˆ‡é¡å¤–çš„è² è¼‰(payload) â”€â”€ ä¸€çµ„å®šç¾©è¨Šæ¯å…§å®¹çš„è³‡æ–™ â”€â”€ å‘ˆç¾ã€‚éŠæˆ²ä¸­å…¸å‹çš„è¨Šæ¯å¯ä»¥æ˜¯ `KEY_PRESSED_ENTER`ã€‚
- **ç™¼å¸ƒè€…**ï¼š é€™å€‹å…ƒç´ *ç™¼å¸ƒ*è¨Šæ¯çµ¦æ‰€æœ‰çš„è¨‚é–±è€…ã€‚
- **è¨‚é–±è€…**ï¼š é€™å€‹å…ƒç´ *ç›£è½*ç‰¹å®šçš„è¨Šæ¯ï¼Œä¸¦è—‰ç”±åŸ·è¡ŒæŸäº›ä»»å‹™ä»¥ä½œç‚ºè¨Šæ¯çš„å›æ‡‰ï¼Œä¾‹å¦‚ç™¼å°„é›·å°„å…‰ã€‚

å¯¦è¸æ–¹æ³•é›–å°ï¼Œä½†é€™æ˜¯åŠŸèƒ½å¼·å¤§çš„è¨­è¨ˆæ–¹å¼ã€‚é€™æ˜¯å®ƒçš„å»ºç«‹æ–¹å¼ï¼š

```javascript
//è¨­å®š EventEmitter class å®¹ç´ç›£è½è€…
class EventEmitter {
  constructor() {
    this.listeners = {};
  }
//ç•¶è¨Šæ¯æ¥æ”¶æ™‚ï¼Œè®“ç›£è½è€…è™•ç†å®ƒçš„è² è¼‰
  on(message, listener) {
    if (!this.listeners[message]) {
      this.listeners[message] = [];
    }
    this.listeners[message].push(listener);
  }
//ç•¶è¨Šæ¯ç™¼å‡ºæ™‚ï¼Œé™„ä¸Šè² è¼‰ç™¼çµ¦ç›£è½è€…
  emit(message, payload = null) {
    if (this.listeners[message]) {
      this.listeners[message].forEach(l => l(message, payload))
    }
  }
}

```

åˆ©ç”¨ä¸Šè¿°ç¨‹å¼æˆ‘å€‘å»ºç«‹ä¸€å¥—å°å‹å¯¦ä½œå…§å®¹ï¼š

```javascript
//è¨­å®šè¨Šæ¯ç¨®é¡
const Messages = {
  HERO_MOVE_LEFT: 'HERO_MOVE_LEFT'
};
//èª¿ç”¨ä½ è¨­å®šçš„ eventEmitter
const eventEmitter = new EventEmitter();
//è¨­å®šè‹±é›„
const hero = createHero(0,0);
//è®“ eventEmitter ç›£è½æœ‰é—œè‹±é›„å¾€å·¦ç§»çš„è¨Šæ¯ï¼Œä¸¦åŸ·è¡Œå‹•ä½œ
eventEmitter.on(Messages.HERO_MOVE_LEFT, () => {
  hero.move(5,0);
});

//è¨­å®šéŠæˆ²è¦–çª—ä¾†ç›£è½éµç›¤äº‹ä»¶ï¼Œç•¶å·¦æ–¹å‘éµæŒ‰å£“æ™‚ï¼Œç™¼å‡ºè‹±é›„å¾€å·¦ç§»çš„è¨Šæ¯
window.addEventListener('keyup', (evt) => {
  if (evt.key === 'ArrowLeft') {
    eventEmitter.emit(Messages.HERO_MOVE_LEFT)
  }
});
```

æˆ‘å€‘é€£æ¥äº†éµç›¤äº‹ä»¶ `ArrowLeft` ä¸¦å‚³é `HERO_MOVE_LEFT` è¨Šæ¯ã€‚æˆ‘å€‘ç›£è½è©²è¨Šæ¯ä¸¦ç§»å‹• `hero` ä½œç‚ºçµæœã€‚é€™ç¨®é–‹ç™¼æ–¹å¼è®“äº‹ä»¶ç›£è½è€…èˆ‡è‹±é›„å€éš”é–‹ä¾†ã€‚ä½ ä¹Ÿå¯ä»¥å°‡ `ArrowLeft` æ›æˆ `A` éµã€‚æ­¤å¤–ï¼Œæˆ‘å€‘èƒ½ä¿®æ”¹ eventEmitter çš„ on å‡½å¼ï¼Œè®“ `ArrowLeft` äº‹ä»¶ç”¢ç”Ÿæˆªç„¶ä¸åŒçš„è¡Œç‚ºã€‚

```javascript
eventEmitter.on(Messages.HERO_MOVE_LEFT, () => {
  hero.move(5,0);
});
```

ç•¶éŠæˆ²è¶Šä¾†è¶Šè±å¯Œã€ç‰©ä»¶è¶Šä¾†è¶Šè¤‡é›œæ™‚ï¼Œé€™å¥—è¨­è¨ˆæ–¹å¼èƒ½ç¶­æŒç¨‹å¼ç¢¼çš„æ•´æ½”ã€‚ç”±è¡·å»ºè­°å–„ç”¨é€™å¥—è¨­è¨ˆæ¨¡å¼ã€‚

---

## ğŸš€ æŒ‘æˆ°

æƒ³æƒ³çœ‹ç™¼å¸ƒè¨‚é–±æ¨¡å¼å¯ä»¥å¦‚ä½•å¢é€²ä¸€æ¬¾éŠæˆ²ã€‚å“ªä¸€å€‹éƒ¨ä»½è©²ç™¼é€äº‹ä»¶ï¼Œè€ŒéŠæˆ²åˆè©²å¦‚ä½•å›æ‡‰äº‹ä»¶ï¼Ÿç¾åœ¨ä½ æœ‰æ©Ÿæœƒç™¼æ®ä½ çš„å‰µæ„ï¼Œæ€è€ƒä¸€æ¬¾æ–°éŠæˆ²å’Œå®ƒé‹ä½œçš„æ¨¡çµ„ã€‚

## èª²å¾Œæ¸¬é©—

[èª²å¾Œæ¸¬é©—](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/30?loc=zh_tw)

## è¤‡ç¿’èˆ‡è‡ªå­¸

è—‰ç”±[é–±è®€æ­¤é€£çµ](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber/?WT.mc_id=academic-77807-sagibbon)ä¾†èªè­˜æ›´å¤šé—œæ–¼ç™¼å¸ƒèˆ‡è¨‚é–±çš„è¨­è¨ˆæ¨¡å¼ã€‚

## ä½œæ¥­

[å»ºç«‹éŠæˆ²é››å½¢](assignment.zh-tw.md)


export default ({ children }) => <div className="docs-content">{children}</div>;