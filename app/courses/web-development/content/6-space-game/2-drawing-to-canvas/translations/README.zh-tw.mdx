---
title: å»ºç«‹å¤ªç©ºéŠæˆ² Part 2ï¼šåœ¨ç•«å¸ƒä¸Šç¹ªè£½è‹±é›„èˆ‡æ€ªç‰©
description: åœ–ç‰‡å‡ºè‡ªæ–¼ [MDN](https://developer.mozilla.org/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes)
lastUpdated: 2024-12-21T06:11:55.057Z
---

# å»ºç«‹å¤ªç©ºéŠæˆ² Part 2ï¼šåœ¨ç•«å¸ƒä¸Šç¹ªè£½è‹±é›„èˆ‡æ€ªç‰©

## èª²å‰æ¸¬é©—

[èª²å‰æ¸¬é©—](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/31?loc=zh_tw)

## Canvas

Canvas æ˜¯ HTML ä¸­çš„å…ƒç´ ï¼Œé è¨­ä¸Šä¸å¸¶æœ‰ä»»ä½•å…§å®¹ï¼Œå°±å¦‚ä¸€å¡Šç™½æ¿ã€‚ä½ éœ€è¦è‡ªå·±å½©ç¹ªä¸Šå»ã€‚

âœ… åœ¨ MDN ä¸Šé–±è®€[æ›´å¤šé—œæ–¼ Canvas API](https://developer.mozilla.org/docs/Web/API/Canvas_API)ã€‚

é€™æ˜¯å®ƒå…¸å‹çš„å®£å‘Šæ–¹å¼ï¼Œä½åœ¨é é¢çš„ body ä¸­ï¼š

```html
<canvas id="myCanvas" width="200" height="100"></canvas>
```

ä¸Šé¢æˆ‘å€‘è¨­å®šäº† `id`ã€`width` å’Œ `height`ã€‚

- `id`ï¼šè®“ä½ åœ¨è™•ç†ç‰©ä»¶æ™‚ï¼Œèƒ½å¿«é€Ÿåœ°å–å¾—åƒè€ƒä½ç½®ã€‚
- `width`ï¼šç‰©ä»¶çš„å¯¬åº¦ã€‚
- `height`ï¼šç‰©ä»¶çš„é«˜åº¦ã€‚

## ç¹ªè£½ç°¡å–®å¹¾ä½•åœ–æ¨£

Canvas ä½¿ç”¨äº†ç¬›å¡çˆ¾åº§æ¨™ç³»ç¹ªè£½åœ–æ¡ˆã€‚å› æ­¤æœ‰ x è»¸èˆ‡ y è»¸ä¾†è¡¨é”ç‰©ä»¶çš„æ‰€åœ¨åœ°é»ã€‚åº§æ¨™é» `0,0` ä½åœ¨ç•«å¸ƒçš„å·¦ä¸Šæ–¹ï¼›è€Œå³ä¸‹æ–¹å‰‡æ˜¯æˆ‘å€‘å®šç¾©ç•«å¸ƒçš„å¯¬åº¦èˆ‡é«˜åº¦ã€‚

![ç•«å¸ƒç¶²æ ¼](../canvas_grid.png)
> åœ–ç‰‡å‡ºè‡ªæ–¼ [MDN](https://developer.mozilla.org/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes)

è¦åœ¨ Canvas ç‰©ä»¶ä¸Šç¹ªè£½åœ–æ¡ˆï¼Œä½ éœ€è¦åŸ·è¡Œä¸‹åˆ—æ­¥é©Ÿï¼š

1. **å–å¾— Canvas ç‰©ä»¶çš„åƒè€ƒä½ç½®**ã€‚
1. **å–å¾— Context ç‰©ä»¶çš„åƒè€ƒä½ç½®**ï¼Œå®šç¾©åœ¨ Canvas å…ƒç´ ä¸­ã€‚
1. ä½¿ç”¨ context å…ƒç´ **é€²è¡Œç¹ªè£½å‹•ä½œ**ã€‚

ä»¥ç¨‹å¼ç¢¼è¡¨é”ä¸Šè¿°æ­¥é©Ÿæœƒå‘ˆç¾æˆï¼š

```javascript
// ç¹ªè£½ç´…è‰²çŸ©å½¢
//1. å–å¾— canvas åƒè€ƒé»
canvas = document.getElementById("myCanvas");

//2. è¨­å®š context ç‚º 2D ä»¥ç¹ªè£½åŸºæœ¬åœ–å½¢
ctx = canvas.getContext("2d");

//3. å¡«å…¥è‰²å½©ç´…è‰²
ctx.fillStyle = 'red';

//4. åˆ©ç”¨é€™äº›åƒæ•¸æ±ºå®šä½ç½®èˆ‡å¤§å°ï¼Œç¹ªè£½çŸ©å½¢
ctx.fillRect(0,0, 200, 200) // x,y,width, height
```

âœ… Canvas API ä¸»è¦æ˜¯è™•ç† 2D åœ–å½¢ï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨ç¶²é ä¸­ç¹ªè£½ 3D åœ–å½¢ã€‚è¦å®Œæˆé€™å€‹éœ€æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ [WebGL API](https://developer.mozilla.org/docs/Web/API/WebGL_API)ã€‚

ä½ å¯ä»¥ä½¿ç”¨ Canvas API ç¹ªè£½å‡ºé€™äº›ç‰©ä»¶ï¼š

- **å¹¾ä½•åœ–å½¢**ï¼Œæˆ‘å€‘å·²ç¶“å±•ç¤ºç¹ªè£½çŸ©å½¢çš„æµç¨‹ï¼Œé‚„æœ‰è¨±å¤šç¨®å½¢ç‹€å¯ä»¥ä½¿ç”¨ã€‚
- **æ–‡å­—**ï¼Œä½ å¯ä»¥ç¹ªè£½æ–‡å­—ï¼Œæ±ºå®šä½ æƒ³è¦çš„å­—å‹åŠé¡è‰²ã€‚
- **åœ–ç‰‡**ï¼Œä½ å¯ä»¥ä¾æ“šåœ–ç‰‡æª”ç¹ªè£½åœ–æ¡ˆï¼Œèˆ‰ä¾‹ä¾†èªªåƒæ˜¯ .jpg æˆ–æ˜¯ .png æª”ã€‚

âœ… è©¦è©¦çœ‹ï¼ä½ çŸ¥é“å¦‚ä½•ç¹ªè£½çŸ©å½¢ï¼Œä½ èƒ½åœ¨é é¢ä¸­ç¹ªè£½åœ“å½¢å—ï¼Ÿçœ‹çœ‹åœ¨ CodePen ä¸Šæœ‰è¶£çš„ Canvas å¡—é´‰ã€‚é€™é‚Šæœ‰ä¸€æ¨£[ç‰¹åˆ¥ä»¤äººé©šè±”çš„ä¾‹å­](https://codepen.io/dissimulate/pen/KrAwx)ã€‚

## è®€å–ä¸¦ç¹ªè£½åœ–ç‰‡æª”

å»ºç«‹ `Image` ç‰©ä»¶ä¸¦è¨­å®šå…¶ `src` å±¬æ€§ï¼Œä½ å¯ä»¥è®€å–åœ–ç‰‡æª”ã€‚æ¥è‘—ç›£è½ `load` äº‹ä»¶ï¼Œäº†è§£åœ–ç‰‡ä½•æ™‚å·²ç¶“å¯ä»¥è¢«ä½¿ç”¨ã€‚ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š

### è®€å–æª”æ¡ˆ

```javascript
const img = new Image();
img.src = 'path/to/my/image.png';
img.onload = () => {
  // åœ–ç‰‡è¼‰å…¥å®Œæˆï¼Œæº–å‚™ä½¿ç”¨
}
```

### è®€å–æª”æ¡ˆä¹‹æ¨¡å¼

å»ºè­°ä¸Šå¯ä»¥å°‡ä¸Šè¿°ç¨‹å¼æ‰“åŒ…èµ·ä¾†ï¼Œå»ºç«‹æˆå®Œæ•´çš„çµæ§‹ï¼Œåˆ¤æ–·åœ–ç‰‡æ˜¯å¦è¼‰å…¥å®Œæˆï¼Œä¹Ÿæ–¹ä¾¿æœªä¾†çš„ä½¿ç”¨ï¼š

```javascript
function loadAsset(path) {
  return new Promise((resolve) => {
    const img = new Image();
    img.src = path;
    img.onload = () => {
      // åœ–ç‰‡è¼‰å…¥å®Œæˆï¼Œæº–å‚™ä½¿ç”¨
      resolve(img);
    }
  })
}

// å¯¦éš›ç”¨æ³•

async function run() {
  const heroImg = await loadAsset('hero.png')
  const monsterImg = await loadAsset('monster.png')
}

```

è¦åœ¨ç•«é¢ä¸Šç¹ªè£½éŠæˆ²ç‰©ä»¶ï¼Œä½ çš„ç¨‹å¼ç¢¼æœƒå¦‚ä¸‹æ‰€ç¤ºï¼š

```javascript
async function run() {
  const heroImg = await loadAsset('hero.png')
  const monsterImg = await loadAsset('monster.png')

  canvas = document.getElementById("myCanvas");
  ctx = canvas.getContext("2d");
  ctx.drawImage(heroImg, canvas.width/2,canvas.height/2);
  ctx.drawImage(monsterImg, 0,0);
}
```

## æ˜¯æ™‚å€™ä¾†å»ºç«‹ä½ çš„éŠæˆ²äº†

### å»ºç«‹ç›®æ¨™

ä½ éœ€è¦å»ºç«‹åŒ…å« Canvas å…ƒç´ çš„ç¶²é ã€‚å®ƒæœƒæ˜¯ `1024*768` çš„é»‘è‰²ç•«é¢ã€‚æˆ‘å€‘æä¾›äº†å…©å¼µåœ–ç‰‡ï¼š

- è‹±é›„è‰¦è‰‡

   ![è‹±é›„è‰¦è‰‡](../solution/assets/player.png)

- 5*5 éš»æ€ªç‰©

   ![æ•µè»è‰¦è‰‡](../solution/assets/enemyShip.png)

### é–‹å§‹é–‹ç™¼çš„å»ºè­°æ­¥é©Ÿ

åœ¨ä½ çš„ `your-work` å­è³‡æ–™å¤¾ä¸­ï¼Œç¢ºèªæª”æ¡ˆæ˜¯å¦å»ºç«‹å®Œæˆã€‚å®ƒæ‡‰è©²åŒ…æ‹¬ï¼š

```bash
-| assets
  -| enemyShip.png
  -| player.png
-| index.html
-| app.js
-| package.json
```

åœ¨ Visual Studio Code ä¸­é–‹å•Ÿé€™å€‹è³‡æ–™å¤¾çš„å‰¯æœ¬ã€‚ä½ éœ€è¦å»ºç«‹æœ¬åœ°ç«¯çš„é–‹ç™¼ç’°å¢ƒï¼Œå»ºè­°ç‚º Visual Studio Code èˆ‡å®‰è£å¥½çš„ NPM èˆ‡ Nodeã€‚å¦‚æœä½ çš„é›»è…¦ä¸­é‚„æ²’è¨­å®šå¥½ `npm`ï¼Œ[é€™æ˜¯å®ƒçš„è¨­å®šæµç¨‹](https://www.npmjs.com/get-npm)ã€‚

å‰å¾€ `your_work` è³‡æ–™å¤¾ï¼Œé–‹å§‹ä½ çš„å°ˆæ¡ˆï¼š

```bash
cd your-work
npm start
```

é€™æœƒå•Ÿå‹• HTTP ä¼ºæœå™¨ï¼Œç¶²å€ç‚º `http://localhost:5000`ã€‚é–‹å•Ÿç€è¦½å™¨ä¸¦è¼¸å…¥è©²ç¶²å€ã€‚ç›®å‰æœƒæ˜¯ç©ºç™½çš„é é¢ï¼Œä½†ä¸ä¹…å¾Œå°±æœƒä¸ä¸€æ¨£äº†ã€‚

> ç­†è¨˜ï¼šæƒ³è§€å¯Ÿç•«é¢çš„æ”¹è®Šï¼Œè«‹é‡æ–°æ•´ç†ä½ çš„é é¢ã€‚

### åŠ å…¥ç¨‹å¼ç¢¼

åœ¨ `your-work/app.js` ä¸­åŠ å…¥ç¨‹å¼ç¢¼ä»¥è§£æ±ºä¸‹åˆ—ç›®æ¨™ï¼š

1. åœ¨ Canvas **ç¹ªè£½**é»‘è‰²èƒŒæ™¯
   > è¦é»ï¼šåœ¨ `/app.js` ä¸­ï¼ŒåŠ å…¥å…©è¡Œç¨‹å¼åœ¨ TODO ä¸‹æ–¹ï¼šè¨­å®š `ctx` å…ƒç´ ç‚ºé»‘è‰²ï¼Œå·¦ä¸Šæ–¹åº§æ¨™é»ç‚º 0,0 ä¸”å¤§å°èˆ‡ Canvas ç›¸ç­‰ã€‚
2. **è®€å–**æè³ª
   > è¦é»ï¼šä½¿ç”¨ `await loadTexture` å°å…¥åœ–ç‰‡ä½ç½®ä»¥æ–°å¢ç©å®¶èˆ‡æ•µè»åœ–ç‰‡ã€‚ä½ é‚„æ²’è¾¦æ³•åœ¨ç•«é¢ä¸Šçœ‹åˆ°å®ƒå€‘ï¼
3. åœ¨ç•«é¢çš„æ­£ä¸‹æ–¹**ç¹ªè£½**è‹±é›„
   > è¦é»ï¼šä½¿ç”¨ `drawImage` API ä¾†ç¹ªè£½ heroImg åˆ°ç•«é¢ä¸Šï¼Œè¨­å®šä½ç½®ç‚º  `canvas.width / 2 - 45` èˆ‡ `canvas.height - canvas.height / 4)`ã€‚
4. **ç¹ªè£½** 5*5 éš»æ€ªç‰©
   > è¦é»ï¼šç¾åœ¨ç§»é™¤è¨»è§£ï¼Œåœ¨ç•«é¢ä¸Šç¹ªè£½æ•µäººã€‚æ¥è‘—ç·¨è¼¯å‡½å¼ `createEnemies`ã€‚

    é¦–å…ˆï¼Œè¨­å®šå¹¾å€‹å¸¸æ•¸ï¼š

    ```javascript
    const MONSTER_TOTAL = 5;
    const MONSTER_WIDTH = MONSTER_TOTAL * 98;
    const START_X = (canvas.width - MONSTER_WIDTH) / 2;
    const STOP_X = START_X + MONSTER_WIDTH;
    ```

    æ¥è‘—ï¼Œåˆ©ç”¨è¿´åœˆåœ¨ç•«é¢ä¸Šç¹ªè£½çŸ©é™£å‹æ…‹çš„æ€ªç‰©ï¼š

    ```javascript
    for (let x = START_X; x < STOP_X; x += 98) {
        for (let y = 0; y < 50 * 5; y += 50) {
          ctx.drawImage(enemyImg, x, y);
        }
      }
    ```

## çµæœ

å®Œæˆå¾Œçš„æˆæœæ‡‰è©²å¦‚ä¸‹æ‰€ç¤ºï¼š

![é»‘ç•«é¢ä¸Šæœ‰è‹±é›„èˆ‡ 5*5 éš»æ€ªç‰©](../partI-solution.png)

## è§£ç­”

è©¦è‘—è‡ªå·±å…ˆå®Œæˆç¨‹å¼ç¢¼ï¼Œä½†å¦‚æœä½ é­é‡åˆ°å›°é›£ï¼Œè«‹åƒè€ƒ[è§£ç­”](../solution/app.js)ã€‚

---

## ğŸš€ æŒ‘æˆ°

ä½ å·²ç¶“å­¸æœƒç¹ªè£½ 2D åœ–å½¢çš„ Canvas APIã€‚çœ‹çœ‹ [WebGL API](https://developer.mozilla.org/docs/Web/API/WebGL_API)ï¼Œè©¦è‘—ç¹ªè£½ 3D ç‰©ä»¶ã€‚

## èª²å¾Œæ¸¬é©—

[èª²å¾Œæ¸¬é©—](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/32?loc=zh_tw)

## è¤‡ç¿’èˆ‡è‡ªå­¸

[é–±è®€æ›´å¤šè³‡æ–™](https://developer.mozilla.org/docs/Web/API/Canvas_API)ï¼Œå­¸ç¿’æ›´å¤šæœ‰é—œ Canvas API çš„ç”¨æ³•ã€‚

## ä½œæ¥­

[æŠŠç© Canvas API](assignment.zh-tw.md)


export default ({ children }) => <div className="docs-content">{children}</div>;