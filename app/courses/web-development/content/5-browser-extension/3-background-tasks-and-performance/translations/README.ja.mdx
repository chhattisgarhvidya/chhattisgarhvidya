---
title: ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ ãã® 3: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¤ã„ã¦å­¦ã¶
description: "Web ã‚µã‚¤ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¯2ã¤ã®ã“ã¨ãŒã‚ã‚Šã¾ã™: ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿é€Ÿåº¦ã¨ã€ãã®ä¸Šã®ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œé€Ÿåº¦ã§ã™ã€‚" -- [Zack Grossbart](https://www.smashingmagazine.com/2012/06/javascript-profiling-chrome-developer-tools/)
lastUpdated: 2024-12-21T06:11:54.881Z
---

# ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ ãã® 3: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¤ã„ã¦å­¦ã¶

## ãƒ¬ãƒƒã‚¹ãƒ³å‰ã®å°ãƒ†ã‚¹ãƒˆ

[ãƒ¬ãƒƒã‚¹ãƒ³å‰ã®å°ãƒ†ã‚¹ãƒˆ](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/27?loc=ja)

### ã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³

ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æœ€å¾Œã®2ã¤ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€API ã‹ã‚‰ãƒ•ã‚§ãƒƒãƒã—ãŸãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚©ãƒ¼ãƒ ã¨è¡¨ç¤ºé ˜åŸŸã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚ã“ã‚Œã¯ã€Web ä¸Šã§ã‚¦ã‚§ãƒ–ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®éå¸¸ã«æ¨™æº–çš„ãªæ–¹æ³•ã§ã™ã€‚éåŒæœŸçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã™ã‚‹æ–¹æ³•ã‚‚å­¦ã³ã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã¯ã»ã¼å®Œæˆã—ã¦ã„ã¾ã™ã€‚

æ‹¡å¼µæ©Ÿèƒ½ã®ã‚¢ã‚¤ã‚³ãƒ³ã®è‰²ã‚’æ›´æ–°ã™ã‚‹ãªã©ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ãŒæ®‹ã£ã¦ã„ã‚‹ã®ã§ã€ã“ã®æ©Ÿä¼šã«ãƒ–ãƒ©ã‚¦ã‚¶ãŒã“ã®ã‚ˆã†ãªã‚¿ã‚¹ã‚¯ã‚’ã©ã®ã‚ˆã†ã«ç®¡ç†ã—ã¦ã„ã‚‹ã®ã‹ã«ã¤ã„ã¦è©±ã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã‚‰ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦ã€Web è³‡ç”£ã‚’æ§‹ç¯‰ã™ã‚‹éš›ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ã®é–¢é€£ã§è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚

## Web ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®åŸºç¤

> "Web ã‚µã‚¤ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¯2ã¤ã®ã“ã¨ãŒã‚ã‚Šã¾ã™: ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿é€Ÿåº¦ã¨ã€ãã®ä¸Šã®ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œé€Ÿåº¦ã§ã™ã€‚" -- [Zack Grossbart](https://www.smashingmagazine.com/2012/06/javascript-profiling-chrome-developer-tools/)

ã©ã®ã‚ˆã†ã«ã—ã¦ã‚ã‚‰ã‚†ã‚‹ãƒ‡ãƒã‚¤ã‚¹ã€ã‚ã‚‰ã‚†ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã‚ã‚‰ã‚†ã‚‹çŠ¶æ³ã§ã€ã‚ãªãŸã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ç‡ƒãˆã‚‹ã‚ˆã†ã«é«˜é€ŸåŒ–ã™ã‚‹ã‹ã¨ã„ã†è©±é¡Œã¯ã€å½“ç„¶ã®ã“ã¨ãªãŒã‚‰è†¨å¤§ãªã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ã€æ¨™æº–çš„ãª Web ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã‚’æ§‹ç¯‰ã™ã‚‹éš›ã«ç•™æ„ã™ã¹ããƒã‚¤ãƒ³ãƒˆã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ã€‚

ã‚µã‚¤ãƒˆãŒåŠ¹ç‡çš„ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«æœ€åˆã«è¡Œã†å¿…è¦ãŒã‚ã‚‹ã“ã¨ã¯ã€ãã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã™ã‚‹ã“ã¨ã§ã™ã€‚ã“ã‚Œã‚’è¡Œã†æœ€åˆã®å ´æ‰€ã¯ã€Web ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã«ã‚ã‚Šã¾ã™ã€‚Edge ã§ã¯ã€ã€Œè¨­å®šã¨ãã®ä»–ã€ãƒœã‚¿ãƒ³ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã®å³ä¸Šã«ã‚ã‚‹3ã¤ã®ç‚¹ã®ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ã‚’é¸æŠã—ã¦ã‹ã‚‰ã€ã€Œãã®ä»–ã®ãƒ„ãƒ¼ãƒ«ã€â†’ã€Œé–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã€ã«ç§»å‹•ã—ã€ã€Œãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚¿ãƒ–ã‚’é–‹ãã¾ã™ã€‚Windows ã§ã¯ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ `Ctrl` + `Shift` + `I`ã€Mac ã§ã¯ `Option` + `Command` + `I` ã‚’ä½¿ç”¨ã—ã¦é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¿ãƒ–ã«ã¯ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚Web ã‚µã‚¤ãƒˆã‚’é–‹ã„ã¦ (ä¾‹ãˆã° https://www.microsoft.com ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„)ã€ã€Œè¨˜éŒ²ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ã‚µã‚¤ãƒˆã‚’æ›´æ–°ã—ã¾ã™ã€‚ã„ã¤ã§ã‚‚éŒ²ç”»ã‚’åœæ­¢ã™ã‚‹ã“ã¨ãŒã§ãã€ã‚µã‚¤ãƒˆã‚’ã€Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã€ã€ã€Œãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ã€ã€Œãƒšã‚¤ãƒ³ãƒˆã€ã™ã‚‹ãŸã‚ã«ç”Ÿæˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒãƒ³ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![Edge profiler](../images/profiler.png)

âœ… Edge ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ‘ãƒãƒ«ã® [Microsoft ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.microsoft.com/ja-jp/microsoft-edge/edgehtml/?WT.mc_id=academic-77807-sagibbon) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

> ãƒ’ãƒ³ãƒˆ: Web ã‚µã‚¤ãƒˆã®èµ·å‹•æ™‚é–“ã‚’æ­£ç¢ºã«æŠŠæ¡ã™ã‚‹ã«ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„ã€‚

ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®è¦ç´ ã‚’é¸æŠã™ã‚‹ã¨ã€ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ä¸­ã«ç™ºç”Ÿã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚ºãƒ¼ãƒ ã‚¤ãƒ³ã§ãã¾ã™ã€‚

ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ä¸€éƒ¨ã‚’é¸æŠã—ã¦ã‚µãƒãƒªãƒ¼ãƒšã‚¤ãƒ³ã‚’è¦‹ã‚‹ã“ã¨ã§ã€ãƒšãƒ¼ã‚¸ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

![Edge ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ©ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ](../images/snapshot.png)

ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ãƒšã‚¤ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã€15ms ä»¥ä¸Šã‹ã‹ã£ãŸã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

![Edge ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°](../images/log.png)

âœ… ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ©ã‚’çŸ¥ã‚Šã¾ã—ã‚‡ã†! ã“ã®ã‚µã‚¤ãƒˆã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã„ã¦ã€ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ãŒãªã„ã‹ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚æœ€ã‚‚èª­ã¿è¾¼ã¿ãŒé…ã„ã‚¢ã‚»ãƒƒãƒˆã¯? ä¸€ç•ªé€Ÿã„ã®ã¯?

## ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ãƒã‚§ãƒƒã‚¯

ä¸€èˆ¬çš„ã«ã¯ã€æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã«å„ä»‹ãªé©šãã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€ã™ã¹ã¦ã® Web é–‹ç™ºè€…ãŒã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹éš›ã«æ³¨æ„ã™ã¹ãã€Œå•é¡Œç‚¹ã€ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

**ã‚¢ã‚»ãƒƒãƒˆã‚µã‚¤ã‚º**: Web ã¯ã“ã“æ•°å¹´ã§ã€Œé‡ãã€ãªã‚Šã€ãã®çµæœã€é…ããªã£ã¦ã„ã¾ã™ã€‚ã“ã®é‡ã•ã®ã„ãã¤ã‹ã¯ã€ç”»åƒã®ä½¿ç”¨ã«é–¢ä¿‚ã—ã¦ã„ã¾ã™ã€‚

âœ… ãƒšãƒ¼ã‚¸ã®é‡ã•ãªã©ã®æ­´å²çš„ãªè¦‹æ–¹ã«ã¤ã„ã¦ã¯ã€[Internet Archive](https://httparchive.org/reports/page-weight) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

è‰¯ã„æ–¹æ³•ã¯ã€ç”»åƒãŒæœ€é©åŒ–ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦é©åˆ‡ãªã‚µã‚¤ã‚ºã¨è§£åƒåº¦ã§é…ä¿¡ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚

**DOM ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«**: ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã‚ãªãŸãŒæ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ã«åŸºã¥ã„ã¦ Document Object Model ã‚’æ§‹ç¯‰ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã§ã€ã‚¿ã‚°ã‚’æœ€å°é™ã«æŠ‘ãˆã€ãƒšãƒ¼ã‚¸ãŒå¿…è¦ã¨ã™ã‚‹ã‚‚ã®ã ã‘ã‚’ä½¿ç”¨ã—ã¦ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒãƒšãƒ¼ã‚¸ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Šã«ã¤ãªãŒã‚Šã¾ã™ã€‚ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯ã€ãƒšãƒ¼ã‚¸ã«é–¢é€£ã™ã‚‹ä½™åˆ†ãª CSS ã‚’æœ€é©åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€1 ã¤ã®ãƒšãƒ¼ã‚¸ã§ã®ã¿ä½¿ç”¨ã™ã‚‹å¿…è¦ã®ã‚ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã¯ã€ãƒ¡ã‚¤ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã«å«ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

**JavaScript**: ã™ã¹ã¦ã® JavaScript é–‹ç™ºè€…ã¯ã€DOM ã®æ®‹ã‚Šã®éƒ¨åˆ†ã‚’èµ°æŸ»ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã«æç”»ã™ã‚‹å‰ã«ãƒ­ãƒ¼ãƒ‰ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ 'ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°' ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚(ãƒ†ãƒ©ãƒªã‚¦ãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è¡Œã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«) ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ `defer` ã‚’ä½¿ã†ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

âœ… [Site Speed Test ã® Web ã‚µã‚¤ãƒˆ](https://www.webpagetest.org/)ã§ã„ãã¤ã‹ã®ã‚µã‚¤ãƒˆã‚’è©¦ã—ã¦ã¿ã‚‹ã¨ã€ã‚µã‚¤ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’åˆ¤æ–­ã™ã‚‹ãŸã‚ã«è¡Œã‚ã‚Œã‚‹ä¸€èˆ¬çš„ãªãƒã‚§ãƒƒã‚¯ã«ã¤ã„ã¦è©³ã—ãçŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚Œã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒé€ä¿¡ã—ãŸã‚¢ã‚»ãƒƒãƒˆã‚’ã©ã®ã‚ˆã†ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã‹ãŒã‚ã‹ã£ãŸã®ã§ã€æ‹¡å¼µæ©Ÿèƒ½ã‚’å®Œæˆã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãªæœ€å¾Œã®ã„ãã¤ã‹ã®ã“ã¨ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

### è‰²ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°ã®ä½œæˆ

`src/index.js` ã®ä¸­ã§ä½œæ¥­ã—ã€`calculateColor()` ã¨ã„ã†é–¢æ•°ã‚’ã€DOM ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«è¨­å®šã—ãŸä¸€é€£ã®å¤‰æ•° `const` ã®å¾Œã«è¿½åŠ ã—ã¾ã™ã€‚

```javascript
function calculateColor(value) {
	let co2Scale = [0, 150, 600, 750, 800];
	let colors = ['#2AA364', '#F5EB4D', '#9E4229', '#381D02', '#381D02'];

	let closestNum = co2Scale.sort((a, b) => {
		return Math.abs(a - value) - Math.abs(b - value);
	})[0];
	console.log(value + ' is closest to ' + closestNum);
	let num = (element) => element > closestNum;
	let scaleIndex = co2Scale.findIndex(num);

	let closestColor = colors[scaleIndex];
	console.log(scaleIndex, closestColor);

	chrome.runtime.sendMessage({ action: 'updateIcon', value: { color: closestColor } });
}
```

ã“ã“ã§ã¯ä½•ã‚’ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹? å‰å›ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§å®Œäº†ã—ãŸ API ã‚³ãƒ¼ãƒ«ã®å€¤ (ç‚­ç´ å¼·åº¦) ã‚’æ¸¡ã—ã¦ã€ãã®å€¤ãŒ colors é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã©ã‚Œã ã‘è¿‘ã„ã‹ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ãã—ã¦ã€æœ€ã‚‚è¿‘ã„è‰²ã®å€¤ã‚’ chrome.runtime ã«é€ã‚Šã¾ã™ã€‚

chrome.runtime ã«ã¯ã€ã‚ã‚‰ã‚†ã‚‹ç¨®é¡ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã‚’å‡¦ç†ã™ã‚‹ [API](https://developer.chrome.com/extensions/runtime) ãŒã‚ã‚Šã€ã‚ãªãŸã®æ‹¡å¼µæ©Ÿèƒ½ã¯ãã‚Œã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

> "chrome.runtime API ã‚’ä½¿ç”¨ã—ã¦ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒšãƒ¼ã‚¸ã‚’å–å¾—ã—ãŸã‚Šã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®è©³ç´°ã‚’è¿”ã—ãŸã‚Šã€ã‚¢ãƒ—ãƒªã‚„æ‹¡å¼µæ©Ÿèƒ½ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦å¿œç­”ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€ã“ã® API ã‚’ä½¿ç”¨ã—ã¦ URL ã®ç›¸å¯¾ãƒ‘ã‚¹ã‚’å®Œå…¨ä¿®é£¾ URL ã«å¤‰æ›ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚"

âœ… ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µã‚’ Edge ç”¨ã«é–‹ç™ºã—ã¦ã„ã‚‹ã¨ã€chrome ã® API ã‚’ä½¿ã£ã¦ã„ã‚‹ã“ã¨ã«é©šãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æ–°ã—ã„ Edge ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ Chromium ãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ³ã‚¸ãƒ³ä¸Šã§å‹•ä½œã—ã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

> ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã‚’ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«åŒ–ã—ãŸã„å ´åˆã¯ã€æ‹¡å¼µæ©Ÿèƒ½è‡ªä½“ãŒç‹¬ç«‹ã—ãŸãƒ–ãƒ©ã‚¦ã‚¶ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ãŸã‚ã€æ‹¡å¼µæ©Ÿèƒ½è‡ªä½“ã®ä¸­ã‹ã‚‰é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¤ã‚³ãƒ³ã®è‰²ã®è¨­å®š

ã“ã“ã§ã€`init()` é–¢æ•°ã®ä¸­ã§ã€ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚°ãƒªãƒ¼ãƒ³ã«è¨­å®šã—ã¦ã€chrome ã® `updateIcon` ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å†åº¦å‘¼ã³å‡ºã—ã¦èµ·å‹•ã—ã¾ã™ã€‚

```javascript
chrome.runtime.sendMessage({
	action: 'updateIcon',
		value: {
			color: 'green',
		},
});
```
### é–¢æ•°ã®å‘¼ã³å‡ºã—ã€å‘¼ã³å‡ºã—ã®å®Ÿè¡Œ

æ¬¡ã«ã€C02Signal API ãŒè¿”ã™ãƒ—ãƒ­ãƒŸã‚¹ã«è¿½åŠ ã—ã¦ã€å…ˆã»ã©ä½œæˆã—ãŸé–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

```javascript
//let CO2...
calculateColor(CO2);
```

æœ€å¾Œã«ã€`/dist/background.js` ã§ã€ã“ã‚Œã‚‰ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å‘¼ã³å‡ºã—ç”¨ã®ãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```javascript
chrome.runtime.onMessage.addListener(function (msg, sender, sendResponse) {
	if (msg.action === 'updateIcon') {
		chrome.browserAction.setIcon({ imageData: drawIcon(msg.value) });
	}
});
//ã‚¨ãƒŠã‚¸ãƒ¼ãƒ­ãƒªãƒãƒƒãƒ—ã®æ‹¡å¼µæ©Ÿèƒ½ã‹ã‚‰å€Ÿã‚ŠãŸã€è‰¯ã„æ©Ÿèƒ½
function drawIcon(value) {
	let canvas = document.createElement('canvas');
	let context = canvas.getContext('2d');

	context.beginPath();
	context.fillStyle = value.color;
	context.arc(100, 100, 50, 0, 2 * Math.PI);
	context.fill();

	return context.getImageData(50, 50, 100, 100);
}
```
ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚¿ã‚¹ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ã«æ¥ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚'updateIcon' ã¨å‘¼ã°ã‚Œã‚‹å ´åˆã€æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€Canvas API ã‚’ä½¿ã£ã¦é©åˆ‡ãªè‰²ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’æç”»ã—ã¦ã„ã¾ã™ã€‚

âœ… Canvas API ã«ã¤ã„ã¦ã¯ã€[ã‚¹ãƒšãƒ¼ã‚¹ã‚²ãƒ¼ãƒ ã®ãƒ¬ãƒƒã‚¹ãƒ³](../../../6-space-game/2-drawing-to-canvas/translations/README.ja.md)ã§è©³ã—ãèª¬æ˜ã—ã¦ã„ã¾ã™ã€‚

ã•ã¦ã€æ‹¡å¼µæ©Ÿèƒ½ã‚’å†æ§‹ç¯‰ (`npm run build`) ã—ã¦ã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¦æ‹¡å¼µæ©Ÿèƒ½ã‚’èµ·å‹•ã—ã€è‰²ã®å¤‰åŒ–ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç”¨äº‹ã‚’æ¸ˆã¾ã›ã‚‹ã®ã«ã‚‚ã€ãŠçš¿ã‚’æ´—ã†ã®ã«ã‚‚è‰¯ã„æ™‚é–“å¸¯ã§ã—ã‚‡ã†ã‹? ã“ã‚Œã§ã‚ã‹ã‚Šã¾ã—ãŸ!

ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€‚ã‚ãªãŸã¯ä¾¿åˆ©ãªãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã‚’æ§‹ç¯‰ã—ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒã©ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã®ã‹ã€ãã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ã©ã®ã‚ˆã†ã«ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã™ã‚‹ã®ã‹ã«ã¤ã„ã¦ã€ã‚ˆã‚Šå¤šãã®ã“ã¨ã‚’å­¦ã³ã¾ã—ãŸã€‚

---

## ğŸš€ ãƒãƒ£ãƒ¬ãƒ³ã‚¸

ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã® Web ã‚µã‚¤ãƒˆã®ä¸­ã«ã¯ã€ã‹ãªã‚Šæ˜”ã‹ã‚‰ã‚ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã€ãã‚Œã‚‰ã® GitHub ã®æ­´å²ã«åŸºã¥ã„ã¦ã€ä½•å¹´ã«ã‚‚ã‚ãŸã£ã¦ã©ã®ã‚ˆã†ã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæœ€é©åŒ–ã•ã‚Œã¦ããŸã®ã‹ã‚’èª¿ã¹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚æœ€ã‚‚ä¸€èˆ¬çš„ãªå•é¡Œç‚¹ã¯ä½•ã§ã—ã‚‡ã†ã‹?

## ãƒ¬ãƒƒã‚¹ãƒ³å¾Œã®å°ãƒ†ã‚¹ãƒˆ

[ãƒ¬ãƒƒã‚¹ãƒ³å¾Œã®å°ãƒ†ã‚¹ãƒˆ](https://ashy-river-0debb7803.1.azurestaticapps.net/quiz/28?loc=ja)

## å¾©ç¿’ã¨è‡ªå·±å­¦ç¿’

[ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼](https://perf.email/)ã¸ã®ç™»éŒ²ã‚’æ¤œè¨ã—ã¦ã¿ã¾ã›ã‚“ã‹?

Web ãƒ„ãƒ¼ãƒ«ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¿ãƒ–ã‚’è¦‹ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒ Web ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è©•ä¾¡ã™ã‚‹æ–¹æ³•ã®ã„ãã¤ã‹ã‚’èª¿æŸ»ã—ã¦ãã ã•ã„ã€‚å¤§ããªé•ã„ã¯ã‚ã‚Šã¾ã™ã‹?

## èª²é¡Œ

[ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãŸã‚ã«ã‚µã‚¤ãƒˆã‚’åˆ†æã™ã‚‹](assignment.ja.md)



export default ({ children }) => <div className="docs-content">{children}</div>;